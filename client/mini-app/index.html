<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>–ß–∏—Ç–∞—Ç–µ–ª—å ‚Äî –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫ —Ü–∏—Ç–∞—Ç</title>
    
    <!-- Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- Meta –¥–ª—è PWA -->
    <meta name="theme-color" content="#d4af37">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="–ß–∏—Ç–∞—Ç–µ–ª—å">
    
    <!-- –ò–∫–æ–Ω–∫–∏ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—É—Ç–∏) -->
    <link rel="apple-touch-icon" href="./assets/icon-192.svg">
    <link rel="icon" type="image/svg+xml" sizes="192x192" href="./assets/icon-192.svg">
    <link rel="icon" type="image/svg+xml" sizes="32x32" href="./assets/icon-32.svg">
    <link rel="icon" type="image/svg+xml" sizes="16x16" href="./assets/icon-16.svg">
    <link rel="manifest" href="./manifest.json">
    
    <!-- –°—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./css/mobile.css">
    <link rel="stylesheet" href="./css/components.css">
    <link rel="stylesheet" href="./css/diary.css">
</head>
<body>
    <!-- Loader -->
    <div id="loader" class="loader">
        <div class="loader-spinner"></div>
        <p>–ó–∞–≥—Ä—É–∂–∞–µ–º –≤–∞—à –¥–Ω–µ–≤–Ω–∏–∫ —Ü–∏—Ç–∞—Ç...</p>
    </div>

    <!-- Main App Container -->
    <div id="app" class="app-container" style="display: none;">
        
        <!-- Navigation -->
        <nav class="bottom-nav" id="navigation">
            <button class="nav-item active" data-page="home">
                <span class="nav-icon">üè†</span>
                <span class="nav-label">–ì–ª–∞–≤–Ω–∞—è</span>
            </button>
            <button class="nav-item" data-page="diary">
                <span class="nav-icon">üìñ</span>
                <span class="nav-label">–î–Ω–µ–≤–Ω–∏–∫</span>
            </button>
            <button class="nav-item" data-page="reports">
                <span class="nav-icon">üìä</span>
                <span class="nav-label">–û—Ç—á–µ—Ç—ã</span>
            </button>
            <button class="nav-item" data-page="achievements">
                <span class="nav-icon">üèÜ</span>
                <span class="nav-label">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</span>
            </button>
            <button class="nav-item" data-page="settings">
                <span class="nav-icon">‚öôÔ∏è</span>
                <span class="nav-label">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
            </button>
        </nav>

        <!-- Page: Home -->
        <div id="page-home" class="page active">
            <header class="page-header">
                <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h1>
                <p class="user-greeting">–í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫ —Ü–∏—Ç–∞—Ç</p>
            </header>

            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üìö</div>
                    <div class="stat-content">
                        <div class="stat-number" id="total-quotes">0</div>
                        <div class="stat-label">–í—Å–µ–≥–æ —Ü–∏—Ç–∞—Ç</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚ú®</div>
                    <div class="stat-content">
                        <div class="stat-number" id="week-quotes">0</div>
                        <div class="stat-label">–ó–∞ –Ω–µ–¥–µ–ª—é</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üî•</div>
                    <div class="stat-content">
                        <div class="stat-number" id="streak-days">0</div>
                        <div class="stat-label">–î–Ω–µ–π –ø–æ–¥—Ä—è–¥</div>
                    </div>
                </div>
            </div>

            <!-- Recent Quotes -->
            <div class="recent-quotes-section">
                <h2>–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ü–∏—Ç–∞—Ç—ã</h2>
                <div id="recent-quotes-list" class="quotes-list">
                    <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è -->
                </div>
                <button class="btn-primary" onclick="app.showPage('diary')">
                    üìñ –û—Ç–∫—Ä—ã—Ç—å –¥–Ω–µ–≤–Ω–∏–∫
                </button>
            </div>
        </div>

        <!-- Page: Diary - –û–ë–ù–û–í–õ–ï–ù–û –¥–ª—è —Ü–µ–ª—å–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü -->
        <div id="page-diary" class="page">
            <div class="diary-container">
                <div class="diary-header">
                    <h1 class="diary-title">–ú–æ–π –¥–Ω–µ–≤–Ω–∏–∫ —Ü–∏—Ç–∞—Ç</h1>
                    <p class="diary-subtitle">–ú–µ—Å—Ç–æ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –º—É–¥—Ä—ã—Ö –º—ã—Å–ª–µ–π –∏ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è</p>
                </div>

                <div class="book-container" id="book-container">
                    <!-- –ü–µ—Ä–µ–ø–ª–µ—Ç –∫–Ω–∏–≥–∏ -->
                    <div class="book-spine"></div>
                    
                    <!-- –¶–µ–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
                    <div class="book-page">
                        <div class="page-content" id="page-content">
                            <div class="page-loading">–ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–Ω–µ–≤–Ω–∏–∫–∞...</div>
                        </div>
                        <!-- –ö–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–π –∫—Ä–∞–π –¥–ª—è –ø–µ—Ä–µ–ª–∏—Å—Ç—ã–≤–∞–Ω–∏—è -->
                        <div class="page-corner"></div>
                    </div>
                </div>

                <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü —Å —Ç–æ—á–∫–∞–º–∏ -->
                <div class="page-navigation">
                    <button class="nav-btn" id="prev-page">
                        ‚óÄ –ù–∞–∑–∞–¥
                    </button>
                    
                    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ç–æ—á–µ–∫ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    <div class="page-dots">
                        <!-- –¢–æ—á–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è JS -->
                    </div>
                    
                    <div class="page-indicator" id="page-indicator">
                        –°—Ç—Ä–∞–Ω–∏—Ü–∞ 1 –∏–∑ 1
                    </div>
                    
                    <button class="nav-btn" id="next-page">
                        –í–ø–µ—Ä–µ–¥ ‚ñ∂
                    </button>
                </div>
            </div>
        </div>

        <!-- Page: Reports -->
        <div id="page-reports" class="page">
            <header class="page-header">
                <h1>–û—Ç—á–µ—Ç—ã</h1>
                <p>–í–∞—à–∏ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –∏ –º–µ—Å—è—á–Ω—ã–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏</p>
            </header>

            <!-- Report Tabs -->
            <div class="tab-navigation">
                <button class="tab-btn active" data-tab="weekly">–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ</button>
                <button class="tab-btn" data-tab="monthly">–ú–µ—Å—è—á–Ω—ã–µ</button>
            </div>

            <!-- Weekly Reports -->
            <div id="weekly-reports" class="tab-content active">
                <div id="weekly-reports-list" class="reports-list">
                    <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è -->
                </div>
            </div>

            <!-- Monthly Reports -->
            <div id="monthly-reports" class="tab-content">
                <div id="monthly-reports-list" class="reports-list">
                    <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è -->
                </div>
            </div>
        </div>

        <!-- Page: Achievements -->
        <div id="page-achievements" class="page">
            <header class="page-header">
                <h1>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h1>
                <p>–í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –Ω–∞–≥—Ä–∞–¥—ã</p>
            </header>

            <!-- Achievement Categories -->
            <div class="achievement-categories">
                <button class="category-btn active" data-category="all">–í—Å–µ</button>
                <button class="category-btn" data-category="quotes">–¶–∏—Ç–∞—Ç—ã</button>
                <button class="category-btn" data-category="streak">–°–µ—Ä–∏–∏</button>
                <button class="category-btn" data-category="reading">–ß—Ç–µ–Ω–∏–µ</button>
            </div>

            <!-- Achievements Grid -->
            <div id="achievements-grid" class="achievements-grid">
                <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è -->
            </div>
        </div>

        <!-- Page: Settings -->
        <div id="page-settings" class="page">
            <header class="page-header">
                <h1>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h1>
                <p>–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–º</p>
            </header>

            <!-- User Profile -->
            <div class="profile-section">
                <div class="profile-card">
                    <div class="profile-avatar" id="user-avatar">
                        üë§
                    </div>
                    <div class="profile-info">
                        <h3 id="user-name">–ó–∞–≥—Ä—É–∑–∫–∞...</h3>
                        <p id="user-username">@username</p>
                    </div>
                </div>
            </div>

            <!-- Settings Groups -->
            <div class="settings-groups">
                <div class="settings-group">
                    <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                    <div class="setting-item">
                        <span>–í—Å–µ–≥–æ —Ü–∏—Ç–∞—Ç</span>
                        <span id="settings-total-quotes">0</span>
                    </div>
                    <div class="setting-item">
                        <span>–î–Ω–µ–π –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</span>
                        <span id="settings-days-active">0</span>
                    </div>
                    <div class="setting-item">
                        <span>–õ—é–±–∏–º–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è</span>
                        <span id="settings-fav-category">‚Äî</span>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</h3>
                    <div class="setting-item">
                        <span>–í–µ—Ä—Å–∏—è</span>
                        <span>1.0.0</span>
                    </div>
                    <div class="setting-item">
                        <span>–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫</span>
                        <span>–ê–Ω–Ω–∞ –ë—É—Å–µ–ª</span>
                    </div>
                </div>
            </div>

            <!-- Actions -->
            <div class="settings-actions">
                <button class="btn-secondary" onclick="app.exportData()">
                    üì§ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
                </button>
                <button class="btn-secondary" onclick="app.showSupport()">
                    üí¨ –°–≤—è–∑–∞—Ç—å—Å—è —Å –ê–Ω–Ω–æ–π
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Modal Overlay -->
    <div id="modal-overlay" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div id="modal-body" class="modal-body">
                <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
            </div>
            <div class="modal-actions">
                <button class="btn-secondary" onclick="app.closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="./js/telegram.js"></script>
    <script src="./js/api.js"></script>
    <script src="./js/diary.js"></script>
    <script src="./js/app.js"></script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./service-worker.js')
                .then(registration => console.log('SW registered:', registration))
                .catch(error => console.log('SW registration failed:', error));
        }
    </script>

    <!-- App Initialization -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
            if (window.TelegramManager) {
                window.TelegramManager.init();
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
            if (window.ReaderApp) {
                window.app = new ReaderApp();
                window.app.init();
            }
            
            // –°–∫—Ä—ã—Ç–∏–µ loader –ø–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
            setTimeout(() => {
                document.getElementById('loader').style.display = 'none';
                document.getElementById('app').style.display = 'block';
            }, 1000);
        });
    </script>
</body>
</html>