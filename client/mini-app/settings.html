<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Настройки - Reader Bot</title>
    <link rel="stylesheet" href="css/main.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <button class="back-btn" onclick="goBack()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="m15 18-6-6 6-6"/>
                </svg>
            </button>
            <h1>Настройки</h1>
            <div class="header-actions">
                <button class="help-btn" onclick="showHelp()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                        <point cx="12" cy="17"/>
                    </svg>
                </button>
            </div>
        </header>

        <!-- Settings Content -->
        <main class="settings-content">
            <!-- Profile Section -->
            <section class="settings-section">
                <h2 class="section-title">Профиль</h2>
                <div class="setting-item">
                    <div class="setting-info">
                        <div class="setting-label">Имя</div>
                        <div class="setting-value" id="userName">Загрузка...</div>
                    </div>
                    <button class="setting-action" onclick="editName()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                        </svg>
                    </button>
                </div>
                
                <div class="setting-item">
                    <div class="setting-info">
                        <div class="setting-label">Email</div>
                        <div class="setting-value" id="userEmail">Загрузка...</div>
                    </div>
                    <button class="setting-action" onclick="editEmail()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                        </svg>
                    </button>
                </div>
            </section>

            <!-- Notifications Section -->
            <section class="settings-section">
                <h2 class="section-title">Уведомления</h2>
                <div class="setting-item">
                    <div class="setting-info">
                        <div class="setting-label">Напоминания о цитатах</div>
                        <div class="setting-description">Получать ежедневные напоминания</div>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="dailyReminders" checked>
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <div class="setting-label">Еженедельные отчеты</div>
                        <div class="setting-description">Получать анализ ваших цитат</div>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="weeklyReports" checked>
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <div class="setting-label">Рекомендации книг</div>
                        <div class="setting-description">Персональные предложения от Анны</div>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="bookRecommendations" checked>
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <div class="setting-label">Время напоминаний</div>
                        <div class="setting-value" id="reminderTime">09:00</div>
                    </div>
                    <button class="setting-action" onclick="editReminderTime()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12,6 12,12 16,14"/>
                        </svg>
                    </button>
                </div>
            </section>

            <!-- Privacy Section -->
            <section class="settings-section">
                <h2 class="section-title">Конфиденциальность</h2>
                <div class="setting-item">
                    <div class="setting-info">
                        <div class="setting-label">Сбор аналитики</div>
                        <div class="setting-description">Помогает улучшить работу бота</div>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="analytics" checked>
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="setting-item clickable" onclick="showPrivacyPolicy()">
                    <div class="setting-info">
                        <div class="setting-label">Политика конфиденциальности</div>
                        <div class="setting-description">Как мы используем ваши данные</div>
                    </div>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="m9 18 6-6-6-6"/>
                    </svg>
                </div>

                <div class="setting-item clickable" onclick="exportData()">
                    <div class="setting-info">
                        <div class="setting-label">Экспорт данных</div>
                        <div class="setting-description">Скачать все ваши цитаты</div>
                    </div>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="7,10 12,15 17,10"/>
                        <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                </div>
            </section>

            <!-- About Section -->
            <section class="settings-section">
                <h2 class="section-title">О приложении</h2>
                <div class="setting-item clickable" onclick="showAbout()">
                    <div class="setting-info">
                        <div class="setting-label">О Reader Bot</div>
                        <div class="setting-description">Версия 1.0.0</div>
                    </div>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="m9 18 6-6-6-6"/>
                    </svg>
                </div>

                <div class="setting-item clickable" onclick="showSupport()">
                    <div class="setting-info">
                        <div class="setting-label">Поддержка</div>
                        <div class="setting-description">Связаться с командой</div>
                    </div>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="m9 18 6-6-6-6"/>
                    </svg>
                </div>

                <div class="setting-item clickable danger" onclick="deleteAccount()">
                    <div class="setting-info">
                        <div class="setting-label">Удалить аккаунт</div>
                        <div class="setting-description">Удалить все данные навсегда</div>
                    </div>
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="3,6 5,6 21,6"/>
                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                        <line x1="10" y1="11" x2="10" y2="17"/>
                        <line x1="14" y1="11" x2="14" y2="17"/>
                    </svg>
                </div>
            </section>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <a href="index.html" class="nav-item">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                    <polyline points="9,22 9,12 15,12 15,22"/>
                </svg>
                <span>Главная</span>
            </a>
            <a href="catalog.html" class="nav-item">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
                </svg>
                <span>Каталог</span>
            </a>
            <a href="diary.html" class="nav-item">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                    <polyline points="14,2 14,8 20,8"/>
                    <line x1="16" y1="13" x2="8" y2="13"/>
                    <line x1="16" y1="17" x2="8" y2="17"/>
                    <polyline points="10,9 9,9 8,9"/>
                </svg>
                <span>Дневник</span>
            </a>
            <a href="achievements.html" class="nav-item">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/>
                    <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/>
                    <path d="M4 22h16l-1-7H5"/>
                    <path d="M8 9h8"/>
                    <path d="M7 9L7 4a3 3 0 0 1 3-3h4a3 3 0 0 1 3 3v5"/>
                </svg>
                <span>Успехи</span>
            </a>
            <a href="settings.html" class="nav-item active">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"/>
                    <path d="M12 1v6m0 6v6"/>
                    <path d="M1 12h6m6 0h6"/>
                </svg>
                <span>Настройки</span>
            </a>
        </nav>
    </div>

    <!-- Modal for editing -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Редактировать</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <input type="text" id="editInput" placeholder="Введите новое значение">
                <input type="time" id="timeInput" style="display: none;">
            </div>
            <div class="modal-actions">
                <button class="btn-secondary" onclick="closeModal()">Отмена</button>
                <button class="btn-primary" onclick="saveEdit()">Сохранить</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/telegram.js"></script>
    <script src="js/api.js"></script>
    <script src="js/settings.js"></script>
</body>
</html>