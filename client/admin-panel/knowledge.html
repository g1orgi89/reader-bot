<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìö –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π - –ß–∏—Ç–∞—Ç–µ–ª—å –ê–¥–º–∏–Ω</title>
    <link rel="stylesheet" href="css/main.css">
    <meta name="description" content="–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ '–ß–∏—Ç–∞—Ç–µ–ª—å' - –∫–Ω–∏–≥–∏, —Ä–∞–∑–±–æ—Ä—ã –∏ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã">
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —à—Ä–∏—Ñ—Ç–æ–≤ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Crimson+Text:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- –¢–æ–Ω–∫–∞—è –∫–Ω–∏–∂–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –¥–ª—è —Ä–∞–±–æ—á–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü -->
    <div class="reader-bg-animation reader-bg-subtle" id="reader-matrix"></div>
    
    <div class="admin-layout">
        <!-- Header -->
        <header class="admin-header">
            <div class="logo-container">
                <div class="logo-icon">üìñ</div>
                <h1>–ß–∏—Ç–∞—Ç–µ–ª—å</h1>
                <span class="logo-subtitle">–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π</span>
            </div>
            
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html">üìä –î–∞—à–±–æ—Ä–¥</a></li>
                    <li><a href="users.html">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a></li>
                    <li><a href="quotes.html">üìù –¶–∏—Ç–∞—Ç—ã</a></li>
                    <li><a href="reports.html">üìà –û—Ç—á–µ—Ç—ã</a></li>
                    <li><a href="tickets.html">üé´ –û–±—Ä–∞—â–µ–Ω–∏—è</a></li>
                    <li><a href="knowledge.html" class="active">üìö –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π</a></li>
                    <li><a href="prompts.html">ü§ñ –ü—Ä–æ–º–ø—Ç—ã</a></li>
                </ul>
            </nav>
            
            <div class="user-menu">
                <span id="admin-username">–ê–Ω–Ω–∞ –ë—É—Å–µ–ª</span>
                <button id="logout-btn" class="btn btn-text">–í—ã—Ö–æ–¥</button>
            </div>
        </header>
        
        <!-- Main content -->
        <main class="admin-content">
            <div class="dashboard-header">
                <h2>üìö –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π "–ß–∏—Ç–∞—Ç–µ–ª—è"</h2>
                <div class="dashboard-controls">
                    <button id="refresh-knowledge" class="btn btn-secondary">
                        üîÑ –û–±–Ω–æ–≤–∏—Ç—å
                    </button>
                    <button id="new-document-btn" class="btn btn-primary">
                        üìù –ù–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
                    </button>
                </div>
            </div>
            
            <!-- –§–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫ -->
            <div class="glow-card mb-4">
                <h3>üîç –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã</h3>
                <div class="filters-grid">
                    <div class="form-group">
                        <label for="search-input">–ü–æ–∏—Å–∫ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö:</label>
                        <input type="text" id="search-input" class="form-control" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É...">
                    </div>
                    <div class="form-group">
                        <label for="category-filter">–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
                        <select id="category-filter" class="select-glow">
                            <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                            <option value="books">üìö –ö–Ω–∏–≥–∏</option>
                            <option value="psychology">üß† –ü—Å–∏—Ö–æ–ª–æ–≥–∏—è</option>
                            <option value="self-development">‚ú® –°–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ</option>
                            <option value="relationships">üíï –û—Ç–Ω–æ—à–µ–Ω–∏—è</option>
                            <option value="productivity">‚ö° –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</option>
                            <option value="mindfulness">üßò –û—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç—å</option>
                            <option value="creativity">üé® –¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ</option>
                            <option value="general">üìñ –û–±—â–∏–µ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="status-filter">–°—Ç–∞—Ç—É—Å:</label>
                        <select id="status-filter" class="select-glow">
                            <option value="">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                            <option value="published">–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ</option>
                            <option value="draft">–ß–µ—Ä–Ω–æ–≤–∏–∫</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="tags-filter">–¢–µ–≥–∏:</label>
                        <input type="text" id="tags-filter" class="form-control" placeholder="üè∑Ô∏è –§–∏–ª—å—Ç—Ä –ø–æ —Ç–µ–≥–∞–º...">
                    </div>
                </div>
                <div class="form-actions">
                    <button id="search-btn" class="btn btn-primary">üîç –ü–æ–∏—Å–∫</button>
                    <button id="reset-search-btn" class="btn btn-secondary">üîÑ –°–±—Ä–æ—Å</button>
                </div>
            </div>
            
            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π -->
            <div class="stats-cards">
                <div class="stat-card glow-card">
                    <div class="stat-header">
                        <h3>üìö –í—Å–µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</h3>
                        <div class="stat-icon">üìä</div>
                    </div>
                    <div class="stat-value" id="total-docs">‚Äî</div>
                    <div class="stat-change neutral" id="docs-change">–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π</div>
                </div>
                
                <div class="stat-card glow-card">
                    <div class="stat-header">
                        <h3>‚úÖ –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ</h3>
                        <div class="stat-icon">üåü</div>
                    </div>
                    <div class="stat-value" id="published-docs">‚Äî</div>
                    <div class="stat-change positive" id="published-change">–î–æ—Å—Ç—É–ø–Ω–æ –±–æ—Ç—É</div>
                </div>
                
                <div class="stat-card glow-card">
                    <div class="stat-header">
                        <h3>üìù –ß–µ—Ä–Ω–æ–≤–∏–∫–∏</h3>
                        <div class="stat-icon">‚è≥</div>
                    </div>
                    <div class="stat-value" id="draft-docs">‚Äî</div>
                    <div class="stat-change warning" id="draft-change">–í —Ä–∞–±–æ—Ç–µ</div>
                </div>
                
                <div class="stat-card glow-card">
                    <div class="stat-header">
                        <h3>ü§ñ AI –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è</h3>
                        <div class="stat-icon">üîó</div>
                    </div>
                    <div class="stat-value" id="vector-store-stats">‚Äî</div>
                    <div class="stat-change neutral" id="vector-change">–í–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ</div>
                </div>
            </div>
            
            <!-- –°–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ -->
            <div class="glow-card">
                <div class="section-header">
                    <h3>üìã –°–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</h3>
                    <div class="table-controls">
                        <span class="results-count">–ù–∞–π–¥–µ–Ω–æ: <span id="results-count">0</span> –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</span>
                    </div>
                </div>
                
                <div class="table-container">
                    <table class="data-table" id="documents-table">
                        <thead>
                            <tr>
                                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                <th>–Ø–∑—ã–∫</th>
                                <th>–¢–µ–≥–∏</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>–û–±–Ω–æ–≤–ª–µ–Ω</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="table-loading">
                                <td colspan="7">
                                    <div class="loading-spinner"></div>
                                    üìö –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
                <div class="pagination" id="knowledge-pagination">
                    <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ JavaScript -->
                </div>
            </div>
            
            <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ AI –∏–Ω–¥–µ–∫—Å–æ–º -->
            <div class="glow-card">
                <div class="section-header">
                    <h3>ü§ñ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ AI –∏–Ω–¥–µ–∫—Å–æ–º</h3>
                    <div class="last-updated">
                        <span class="text-muted">–ü–æ—Å–ª–µ–¥–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è: </span>
                        <span id="rag-last-indexed">‚Äî</span>
                    </div>
                </div>
                
                <div class="ai-actions">
                    <button id="sync-vector-btn" class="btn btn-primary">
                        üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å AI
                    </button>
                    <button id="test-rag-btn" class="btn btn-secondary">
                        üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∏—Å–∫
                    </button>
                    <button id="diagnose-rag" class="btn btn-secondary">
                        ü©∫ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
                    </button>
                </div>
                
                <div class="ai-info">
                    <div class="alert alert-info">
                        <strong>üí° –°–æ–≤–µ—Ç –æ—Ç –ê–Ω–Ω—ã:</strong> –†–µ–≥—É–ª—è—Ä–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã —Å AI –∏–Ω–¥–µ–∫—Å–æ–º –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –∫–Ω–∏–≥ –∏ –∞–Ω–∞–ª–∏–∑–∞ —Ü–∏—Ç–∞—Ç!
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Footer -->
        <footer class="admin-footer">
            <p>üìö "–ß–∏—Ç–∞—Ç–µ–ª—å" - –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ü–∏—Ç–∞—Ç –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π</p>
            <p class="copyright">¬© 2025 –ê–Ω–Ω–∞ –ë—É—Å–µ–ª. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </footer>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ -->
    <div class="modal-overlay" id="document-view-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üìÑ –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body" id="document-view-content">
                <div class="loading-spinner"></div>
                –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞...
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ -->
    <div class="modal-overlay" id="document-edit-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body" id="document-edit-content">
                <div class="loading-spinner"></div>
                –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ä–º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è...
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞ -->
    <div class="modal-overlay" id="document-upload-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body" id="document-upload-content">
                <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ JavaScript -->
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–∏—Å–∫–∞ -->
    <div class="modal-overlay" id="test-search-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∏—Å–∫–∞</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body" id="test-search-content">
                <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ JavaScript -->
            </div>
        </div>
    </div>
    
    <!-- Notification system -->
    <div class="notification-container" id="notification-container"></div>
    
    <!-- Scripts -->
    <script src="js/auth.js"></script>
    <script src="js/main.js"></script>
    <script src="js/knowledge.js"></script>
    
    <script>
        /**
         * üìñ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π "–ß–∏—Ç–∞—Ç–µ–ª—å"
         * –í —Å—Ç–∏–ª–µ –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
         */
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üìö –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π...');
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–∫–∞–∫ –≤ users.html)
            if (typeof checkAuthStatus === 'function') {
                checkAuthStatus();
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            if (typeof initKnowledgePage === 'function') {
                initKnowledgePage();
            } else {
                console.error('üìö –§—É–Ω–∫—Ü–∏—è initKnowledgePage –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
                showNotification('error', '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π');
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–Ω–∏–∂–Ω—É—é –∞–Ω–∏–º–∞—Ü–∏—é (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞)
            if (typeof initReaderMatrix === 'function') {
                initReaderMatrix(true);
            }
            
            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ UI
            setupAdditionalEventListeners();
        });
        
        /**
         * –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ UI
         */
        function setupAdditionalEventListeners() {
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
            document.addEventListener('click', (e) => {
                if (e.target.classList.contains('modal-close') || e.target.classList.contains('modal-overlay')) {
                    closeModal();
                }
            });
            
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    closeModal();
                }
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
            document.getElementById('status-filter')?.addEventListener('change', applyFilters);
            document.getElementById('tags-filter')?.addEventListener('input', debounce(applyFilters, 500));
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
            document.getElementById('refresh-knowledge')?.addEventListener('click', refreshKnowledgeData);
            
            console.log('üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã');
        }
        
        /**
         * –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
         */
        function applyFilters() {
            if (typeof loadDocuments === 'function') {
                loadDocuments();
            }
        }
        
        /**
         * –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü—ã
         */
        async function refreshKnowledgeData() {
            try {
                showNotification('info', '–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö...');
                
                if (typeof loadDocuments === 'function') {
                    await loadDocuments();
                }
                
                if (typeof loadRAGStats === 'function') {
                    await loadRAGStats();
                }
                
                showNotification('success', '–î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã');
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:', error);
                showNotification('error', '–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö');
            }
        }
        
        /**
         * –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (fallback –∫–∞–∫ –≤ index.html)
         */
        function showNotification(type, message) {
            const container = document.getElementById('notification-container');
            if (!container) {
                console.log(`[${type.toUpperCase()}] ${message}`);
                return;
            }
            
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <div class="notification-content">
                    <span class="notification-icon">${type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : type === 'warning' ? '‚ö†Ô∏è' : 'üìñ'}</span>
                    <span class="notification-message">${message}</span>
                </div>
                <button class="notification-close" onclick="this.parentElement.remove()">√ó</button>
            `;
            
            container.appendChild(notification);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 5000);
        }
        
        /**
         * –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
         */
        function closeModal() {
            const activeModal = document.querySelector('.modal-overlay.active');
            if (activeModal) {
                activeModal.classList.remove('active');
                document.body.style.overflow = '';
            }
        }
        
        /**
         * –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
         */
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }
        
        /**
         * Debounce —Ñ—É–Ω–∫—Ü–∏—è
         */
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }
        
        /**
         * –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (—Ä–∞—Å—à–∏—Ä—è–µ–º knowledge.js)
         */
        window.viewDocument = function(documentId) {
            console.log('üìÑ –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞:', documentId);
            
            const modalContent = document.getElementById('document-view-content');
            modalContent.innerHTML = `
                <div class="loading-container">
                    <div class="loading-spinner"></div>
                    üìñ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞...
                </div>
            `;
            
            openModal('document-view-modal');
            
            // –¢—É—Ç –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ API
            // –î–ª—è –ø—Ä–∏–º–µ—Ä–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥–ª—É—à–∫—É
            setTimeout(() => {
                modalContent.innerHTML = `
                    <div class="document-content">
                        <h4>üìÑ –î–æ–∫—É–º–µ–Ω—Ç #${documentId}</h4>
                        <p>–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–æ –∏–∑ API...</p>
                        <div class="document-actions">
                            <button class="btn btn-primary" onclick="editDocument('${documentId}')">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                            <button class="btn btn-danger" onclick="deleteDocument('${documentId}')">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                        </div>
                    </div>
                `;
            }, 1000);
        };
        
        window.editDocument = function(documentId) {
            console.log('‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞:', documentId);
            
            closeModal(); // –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            
            const modalContent = document.getElementById('document-edit-content');
            modalContent.innerHTML = `
                <div class="loading-container">
                    <div class="loading-spinner"></div>
                    üìù –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ä–º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è...
                </div>
            `;
            
            openModal('document-edit-modal');
            
            // –¢—É—Ç –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ä–º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ API
            setTimeout(() => {
                modalContent.innerHTML = `
                    <form id="edit-document-form">
                        <div class="form-group">
                            <label for="edit-title">–ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞:</label>
                            <input type="text" id="edit-title" class="form-control" value="–ü—Ä–∏–º–µ—Ä –Ω–∞–∑–≤–∞–Ω–∏—è">
                        </div>
                        <div class="form-group">
                            <label for="edit-category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
                            <select id="edit-category" class="select-glow">
                                <option value="psychology">üß† –ü—Å–∏—Ö–æ–ª–æ–≥–∏—è</option>
                                <option value="books">üìö –ö–Ω–∏–≥–∏</option>
                                <option value="self-development">‚ú® –°–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="edit-status">–°—Ç–∞—Ç—É—Å:</label>
                            <select id="edit-status" class="select-glow">
                                <option value="published">–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω</option>
                                <option value="draft">–ß–µ—Ä–Ω–æ–≤–∏–∫</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="edit-tags">–¢–µ–≥–∏:</label>
                            <input type="text" id="edit-tags" class="form-control" placeholder="—Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é">
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                            <button type="submit" class="btn btn-primary">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                        </div>
                    </form>
                `;
            }, 1000);
        };
        
        window.deleteDocument = function(documentId) {
            console.log('üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞:', documentId);
            
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.')) {
                showNotification('info', '–£–¥–∞–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞...');
                
                // –¢—É—Ç –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ API
                setTimeout(() => {
                    showNotification('success', '–î–æ–∫—É–º–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω');
                    closeModal();
                    refreshKnowledgeData(); // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫
                }, 1000);
            }
        };
        
        /**
         * –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
         */
        window.createNewDocument = function() {
            console.log('üìù –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞');
            
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏—é –∏–∑ knowledge.js
            if (typeof showUploadDocumentModal === 'function') {
                showUploadDocumentModal();
            } else {
                showNotification('error', '–§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
            }
        };
    </script>
    
    <style>
        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ UI —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π */
        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .form-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 1rem;
        }
        
        .table-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .results-count {
            color: var(--text-muted);
            font-size: 0.9rem;
        }
        
        .ai-actions {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }
        
        .ai-info {
            margin-top: 1rem;
        }
        
        .document-content {
            padding: 1rem;
        }
        
        .document-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
        }
        
        .loading-container {
            text-align: center;
            padding: 2rem;
            color: var(--text-muted);
        }
        
        .loading-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid var(--border-color);
            border-top: 2px solid var(--reader-gold);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 0.5rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .category-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            text-transform: uppercase;
        }
        
        .category-books { background: var(--reader-gold); color: var(--dark-bg); }
        .category-psychology { background: #9b59b6; color: var(--text-white); }
        .category-self-development { background: #e67e22; color: var(--text-white); }
        .category-relationships { background: #e91e63; color: var(--text-white); }
        .category-productivity { background: #3498db; color: var(--text-white); }
        .category-mindfulness { background: #1abc9c; color: var(--text-white); }
        .category-creativity { background: #f39c12; color: var(--dark-bg); }
        .category-general { background: var(--reader-brown); color: var(--text-white); }
        
        .status-published { background: var(--success-color); color: var(--text-white); }
        .status-draft { background: var(--warning-color); color: var(--dark-bg); }
        
        .tag-badge {
            display: inline-block;
            background: rgba(212, 175, 55, 0.1);
            border: 1px solid var(--reader-gold);
            color: var(--reader-gold);
            padding: 0.1rem 0.4rem;
            border-radius: 12px;
            font-size: 0.7rem;
            margin-right: 0.25rem;
            margin-bottom: 0.25rem;
        }
        
        .table-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .last-updated {
            color: var(--text-muted);
            font-size: 0.9rem;
        }
        
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem;
            border-top: 1px solid var(--border-color);
        }
        
        .pagination button {
            min-width: 40px;
            height: 40px;
            border: 1px solid var(--border-color);
            background: var(--card-bg);
            color: var(--text-light);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: all var(--transition-fast);
        }
        
        .pagination button:hover {
            background: var(--hover-bg);
            border-color: var(--reader-gold);
            color: var(--reader-gold);
        }
        
        .pagination button.active {
            background: var(--reader-gold);
            border-color: var(--reader-gold);
            color: var(--dark-bg);
            font-weight: 600;
        }
        
        .data-table tr {
            cursor: pointer;
            transition: background-color var(--transition-fast);
        }
        
        .data-table tr:hover {
            background: rgba(212, 175, 55, 0.05);
        }
        
        .alert {
            padding: 1rem;
            border-radius: var(--border-radius);
            margin-bottom: 1rem;
            border-left: 4px solid;
        }
        
        .alert-info {
            background: rgba(52, 152, 219, 0.1);
            border-left-color: var(--info-color);
            color: var(--text-light);
        }
        
        @media (max-width: 768px) {
            .filters-grid {
                grid-template-columns: 1fr;
            }
            
            .ai-actions {
                flex-direction: column;
            }
            
            .form-actions {
                flex-direction: column;
            }
            
            .table-actions {
                flex-direction: column;
            }
            
            .dashboard-controls {
                flex-direction: column;
                gap: 1rem;
            }
        }
    </style>
</body>
</html>