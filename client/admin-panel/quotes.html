<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìù –¶–∏—Ç–∞—Ç—ã - –ß–∏—Ç–∞—Ç–µ–ª—å –ê–¥–º–∏–Ω</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/quotes.css">
    <meta name="description" content="–ü—Ä–æ—Å–º–æ—Ç—Ä –∏ –∞–Ω–∞–ª–∏–∑ —Ü–∏—Ç–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–æ–µ–∫—Ç–∞ '–ß–∏—Ç–∞—Ç–µ–ª—å'">
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —à—Ä–∏—Ñ—Ç–æ–≤ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Crimson+Text:wght@400;600&display=swap" rel="stylesheet">
    <!-- Chart.js –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- –¢–æ–Ω–∫–∞—è –∫–Ω–∏–∂–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è -->
    <div class="reader-bg-animation reader-bg-subtle" id="reader-matrix"></div>
    
    <div class="admin-layout">
        <!-- Header -->
        <header class="admin-header">
            <div class="logo-container">
                <div class="logo-icon">üìñ</div>
                <h1>–ß–∏—Ç–∞—Ç–µ–ª—å</h1>
                <span class="logo-subtitle">–¶–∏—Ç–∞—Ç—ã</span>
            </div>
            
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html">üìä –î–∞—à–±–æ—Ä–¥</a></li>
                    <li><a href="users.html">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a></li>
                    <li><a href="quotes.html" class="active">üìù –¶–∏—Ç–∞—Ç—ã</a></li>
                    <li><a href="reports.html">üìà –û—Ç—á–µ—Ç—ã</a></li>
                    <li><a href="knowledge.html">üìö –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π</a></li>
                    <li><a href="tickets.html">üé´ –û–±—Ä–∞—â–µ–Ω–∏—è</a></li>
                    <li><a href="prompts.html">üí≠ –ü—Ä–æ–º–ø—Ç—ã</a></li>
                </ul>
            </nav>
            
            <div class="user-menu">
                <span id="admin-username">–ê–Ω–Ω–∞ –ë—É—Å–µ–ª</span>
                <button id="logout-btn" class="btn btn-text">–í—ã—Ö–æ–¥</button>
            </div>
        </header>
        
        <!-- Main content -->
        <main class="admin-content quotes-content">
            <div class="quotes-header">
                <h2>üìù –ê–Ω–∞–ª–∏–∑ –¶–∏—Ç–∞—Ç –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>
                <div class="quotes-actions">
                    <div class="filter-group">
                        <select id="period-filter" class="select-glow">
                            <option value="1d">–°–µ–≥–æ–¥–Ω—è</option>
                            <option value="7d" selected>7 –¥–Ω–µ–π</option>
                            <option value="30d">30 –¥–Ω–µ–π</option>
                            <option value="90d">90 –¥–Ω–µ–π</option>
                        </select>
                        
                        <select id="category-filter" class="select-glow">
                            <option value="all">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                            <option value="–°–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ">üå± –°–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ</option>
                            <option value="–õ—é–±–æ–≤—å">üíï –õ—é–±–æ–≤—å</option>
                            <option value="–ú—É–¥—Ä–æ—Å—Ç—å">üß† –ú—É–¥—Ä–æ—Å—Ç—å</option>
                            <option value="–§–∏–ª–æ—Å–æ—Ñ–∏—è">ü§î –§–∏–ª–æ—Å–æ—Ñ–∏—è</option>
                            <option value="–ú–æ—Ç–∏–≤–∞—Ü–∏—è">‚ö° –ú–æ—Ç–∏–≤–∞—Ü–∏—è</option>
                            <option value="–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ">üé® –¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ</option>
                            <option value="–û—Ç–Ω–æ—à–µ–Ω–∏—è">üë• –û—Ç–Ω–æ—à–µ–Ω–∏—è</option>
                        </select>
                        
                        <select id="author-filter" class="select-glow">
                            <option value="all">–í—Å–µ –∞–≤—Ç–æ—Ä—ã</option>
                            <option value="has_author">–° –∞–≤—Ç–æ—Ä–æ–º</option>
                            <option value="no_author">–ë–µ–∑ –∞–≤—Ç–æ—Ä–∞</option>
                        </select>
                        
                        <input type="text" id="search-quotes" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É —Ü–∏—Ç–∞—Ç—ã –∏–ª–∏ –∞–≤—Ç–æ—Ä—É..." class="search-input">
                    </div>
                    
                    <button id="export-quotes" class="btn btn-secondary btn-glow">
                        <span class="btn-text">üìä –≠–∫—Å–ø–æ—Ä—Ç</span>
                    </button>
                </div>
            </div>
            
            <!-- Analytics cards -->
            <div class="quotes-analytics">
                <div class="analytics-card glow-card">
                    <h3>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</h3>
                    <canvas id="categoriesChart" width="400" height="200"></canvas>
                </div>
                
                <div class="analytics-card glow-card">
                    <h3>üìà –î–∏–Ω–∞–º–∏–∫–∞ —Ü–∏—Ç–∞—Ç</h3>
                    <canvas id="quotesTimelineChart" width="400" height="200"></canvas>
                </div>
                
                <div class="analytics-card glow-card">
                    <h3>üë§ –¢–æ–ø –∞–≤—Ç–æ—Ä—ã</h3>
                    <div class="top-authors-list" id="top-authors-list">
                        <div class="loading">üìñ –ó–∞–≥—Ä—É–∑–∫–∞...</div>
                    </div>
                </div>
            </div>
            
            <!-- Quick stats -->
            <div class="quotes-stats-cards">
                <div class="stat-card glow-card">
                    <div class="stat-header">
                        <h3>üìö –í—Å–µ–≥–æ —Ü–∏—Ç–∞—Ç</h3>
                        <div class="stat-icon">üí´</div>
                    </div>
                    <div class="stat-value" id="total-quotes-stat">8,734</div>
                    <div class="stat-change positive">+127 –∑–∞ –ø–µ—Ä–∏–æ–¥</div>
                </div>
                
                <div class="stat-card glow-card">
                    <div class="stat-header">
                        <h3>üë• –ê–∫—Ç–∏–≤–Ω—ã—Ö –∞–≤—Ç–æ—Ä–æ–≤</h3>
                        <div class="stat-icon">‚úçÔ∏è</div>
                    </div>
                    <div class="stat-value" id="active-authors-stat">156</div>
                    <div class="stat-change positive">+12 –∑–∞ –ø–µ—Ä–∏–æ–¥</div>
                </div>
                
                <div class="stat-card glow-card">
                    <div class="stat-header">
                        <h3>üéØ –ü–æ–ø—É–ª—è—Ä–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è</h3>
                        <div class="stat-icon">üåü</div>
                    </div>
                    <div class="stat-value" id="popular-category-stat">–°–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ</div>
                    <div class="stat-change neutral">34% –æ—Ç –≤—Å–µ—Ö —Ü–∏—Ç–∞—Ç</div>
                </div>
                
                <div class="stat-card glow-card">
                    <div class="stat-header">
                        <h3>üìñ –°—Ä–µ–¥–Ω–µ–µ –≤ –¥–µ–Ω—å</h3>
                        <div class="stat-icon">üìà</div>
                    </div>
                    <div class="stat-value" id="daily-average-stat">18.2</div>
                    <div class="stat-change positive">+2.3 –∫ –ø—Ä–æ—à–ª–æ–º—É –ø–µ—Ä–∏–æ–¥—É</div>
                </div>
            </div>
            
            <!-- Quotes table -->
            <div class="quotes-container glow-card">
                <div class="table-container">
                    <table class="data-table" id="quotes-table">
                        <thead>
                            <tr>
                                <th class="col-id">ID</th>
                                <th class="col-quote">–¶–∏—Ç–∞—Ç–∞</th>
                                <th class="col-author">–ê–≤—Ç–æ—Ä</th>
                                <th class="col-category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                <th class="col-user">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                                <th class="col-sentiment">–ù–∞—Å—Ç—Ä–æ–π</th>
                                <th class="col-date">–î–∞—Ç–∞</th>
                                <th class="col-actions">–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="table-loading">
                                <td colspan="8">üìù –ó–∞–≥—Ä—É–∑–∫–∞ —Ü–∏—Ç–∞—Ç...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- Pagination -->
                <div class="pagination-container">
                    <div class="pagination-info">
                        –ü–æ–∫–∞–∑–∞–Ω–æ <span id="pagination-range">0-0</span> –∏–∑ <span id="pagination-total">0</span> —Ü–∏—Ç–∞—Ç
                    </div>
                    <div class="pagination-controls">
                        <button id="prev-page" class="btn btn-icon btn-secondary" disabled>
                            ‚Üê –ù–∞–∑–∞–¥
                        </button>
                        <span id="pagination-current">–°—Ç—Ä–∞–Ω–∏—Ü–∞ 1</span>
                        <button id="next-page" class="btn btn-icon btn-secondary" disabled>
                            –í–ø–µ—Ä–µ–¥ ‚Üí
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Quote details modal -->
            <div class="quote-details-overlay" id="quote-details-overlay">
                <div class="quote-details-container glow-card">
                    <div class="quote-details-header">
                        <h3 id="quote-details-title">üìù –î–µ—Ç–∞–ª–∏ –¶–∏—Ç–∞—Ç—ã</h3>
                        <button id="close-quote-details" class="btn btn-icon btn-text">√ó</button>
                    </div>
                    
                    <div class="quote-details-content" id="quote-details-content">
                        <div class="loading">üìñ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–µ—Ç–∞–ª–µ–π...</div>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Footer -->
        <footer class="admin-footer">
            <p>üìù "–ß–∏—Ç–∞—Ç–µ–ª—å" - –ê–Ω–∞–ª–∏–∑ –¶–∏—Ç–∞—Ç –∏ –¢–µ–º–∞—Ç–∏–∫</p>
            <p class="copyright">¬© 2025 –ê–Ω–Ω–∞ –ë—É—Å–µ–ª. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </footer>
    </div>
    
    <!-- Notification system -->
    <div class="notification-container" id="notification-container"></div>
    
    <!-- Scripts -->
    <script src="js/auth.js"></script>
    <script src="js/quotes.js"></script>
    
    <script>
        /**
         * –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∞–Ω–∞–ª–∏–∑–∞ —Ü–∏—Ç–∞—Ç
         */
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üìù –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–Ω–∞–ª–∏–∑–∞ —Ü–∏—Ç–∞—Ç');
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
            if (typeof checkAuthStatus === 'function') {
                checkAuthStatus();
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ü–∏—Ç–∞—Ç
            if (typeof initQuotesPage === 'function') {
                initQuotesPage();
            } else {
                console.log('üìù –§—É–Ω–∫—Ü–∏—è initQuotesPage –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º –±–∞–∑–æ–≤—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é');
                initBasicQuotes();
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–Ω–∏–∂–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏
            if (typeof initReaderMatrix === 'function') {
                initReaderMatrix(true); // subtle mode –¥–ª—è —Ä–∞–±–æ—á–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
            }
        });
        
        /**
         * –ë–∞–∑–æ–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–Ω–∞–ª–∏–∑–∞ —Ü–∏—Ç–∞—Ç
         */
        function initBasicQuotes() {
            console.log('üìù –ë–∞–∑–æ–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ü–∏—Ç–∞—Ç');
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã—Ö
            loadQuotesDemo();
            loadChartsDemo();
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
            const periodFilter = document.getElementById('period-filter');
            const categoryFilter = document.getElementById('category-filter');
            const authorFilter = document.getElementById('author-filter');
            const searchInput = document.getElementById('search-quotes');
            
            if (periodFilter) {
                periodFilter.addEventListener('change', filterQuotes);
            }
            if (categoryFilter) {
                categoryFilter.addEventListener('change', filterQuotes);
            }
            if (authorFilter) {
                authorFilter.addEventListener('change', filterQuotes);
            }
            if (searchInput) {
                searchInput.addEventListener('input', filterQuotes);
            }
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —ç–∫—Å–ø–æ—Ä—Ç–∞
            const exportBtn = document.getElementById('export-quotes');
            if (exportBtn) {
                exportBtn.addEventListener('click', exportQuotes);
            }
        }
        
        /**
         * –ó–∞–≥—Ä—É–∑–∫–∞ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã—Ö —Ü–∏—Ç–∞—Ç
         */
        function loadQuotesDemo() {
            const tbody = document.querySelector('#quotes-table tbody');
            if (!tbody) return;
            
            const demoQuotes = [
                {
                    id: 'Q001',
                    text: '–í –∫–∞–∂–¥–æ–º —Å–ª–æ–≤–µ ‚Äî —Ü–µ–ª–∞—è –∂–∏–∑–Ω—å',
                    author: '–ú–∞—Ä–∏–Ω–∞ –¶–≤–µ—Ç–∞–µ–≤–∞',
                    category: 'üé® –¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ',
                    user: '–ú–∞—Ä–∏—è –ü.',
                    sentiment: 'positive',
                    date: '2 —á–∞—Å–∞ –Ω–∞–∑–∞–¥'
                },
                {
                    id: 'Q002',
                    text: '–õ—é–±–æ–≤—å ‚Äî —ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –ª—é–±–∏—Ç—å',
                    author: '–≠—Ä–∏—Ö –§—Ä–æ–º–º',
                    category: 'üíï –õ—é–±–æ–≤—å',
                    user: '–ï–ª–µ–Ω–∞ –°.',
                    sentiment: 'positive',
                    date: '4 —á–∞—Å–∞ –Ω–∞–∑–∞–¥'
                },
                {
                    id: 'Q003',
                    text: '–°—á–∞—Å—Ç—å–µ –≤–Ω—É—Ç—Ä–∏ –Ω–∞—Å, –∞ –Ω–µ –≤–æ–≤–Ω–µ',
                    author: '–ë—É–¥–¥–∞',
                    category: 'üß† –ú—É–¥—Ä–æ—Å—Ç—å',
                    user: '–ê–Ω–Ω–∞ –ú.',
                    sentiment: 'positive',
                    date: '6 —á–∞—Å–æ–≤ –Ω–∞–∑–∞–¥'
                },
                {
                    id: 'Q004',
                    text: '–ñ–∏–∑–Ω—å ‚Äî —ç—Ç–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ',
                    author: null,
                    category: 'üå± –°–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ',
                    user: '–ù–∞—Ç–∞–ª—å—è –ö.',
                    sentiment: 'neutral',
                    date: '1 –¥–µ–Ω—å –Ω–∞–∑–∞–¥'
                },
                {
                    id: 'Q005',
                    text: '–í—Ä–µ–º—è –ª–µ—á–∏—Ç —Ä–∞–Ω—ã, –Ω–æ –æ—Å—Ç–∞–≤–ª—è–µ—Ç —à—Ä–∞–º—ã',
                    author: '–ù–∞—Ä–æ–¥–Ω–∞—è –º—É–¥—Ä–æ—Å—Ç—å',
                    category: 'ü§î –§–∏–ª–æ—Å–æ—Ñ–∏—è',
                    user: '–û–ª—å–≥–∞ –†.',
                    sentiment: 'neutral',
                    date: '1 –¥–µ–Ω—å –Ω–∞–∑–∞–¥'
                },
                {
                    id: 'Q006',
                    text: '–ë—ã—Ç—å —Å–æ–±–æ–π –≤ –º–∏—Ä–µ, –∫–æ—Ç–æ—Ä—ã–π –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø—ã—Ç–∞–µ—Ç—Å—è —Å–¥–µ–ª–∞—Ç—å –≤–∞—Å –∫–µ–º-—Ç–æ –¥—Ä—É–≥–∏–º ‚Äî –≤–µ–ª–∏—á–∞–π—à–µ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ',
                    author: '–†–∞–ª—å—Ñ –≠–º–µ—Ä—Å–æ–Ω',
                    category: 'üå± –°–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ',
                    user: '–¢–∞—Ç—å—è–Ω–∞ –í.',
                    sentiment: 'positive',
                    date: '2 –¥–Ω—è –Ω–∞–∑–∞–¥'
                }
            ];
            
            tbody.innerHTML = demoQuotes.map(quote => {
                const sentimentBadge = getSentimentBadge(quote.sentiment);
                const authorDisplay = quote.author || '<span class="no-author">–ë–µ–∑ –∞–≤—Ç–æ—Ä–∞</span>';
                const shortText = quote.text.length > 60 ? quote.text.substring(0, 60) + '...' : quote.text;
                
                return `
                    <tr onclick="viewQuote('${quote.id}')">
                        <td>${quote.id}</td>
                        <td>
                            <div class="quote-text">"${shortText}"</div>
                        </td>
                        <td>${authorDisplay}</td>
                        <td><span class="category-badge">${quote.category}</span></td>
                        <td>${quote.user}</td>
                        <td>${sentimentBadge}</td>
                        <td>${quote.date}</td>
                        <td>
                            <button class="btn btn-sm btn-secondary" onclick="event.stopPropagation(); viewQuote('${quote.id}')">üëÅÔ∏è</button>
                            <button class="btn btn-sm btn-secondary" onclick="event.stopPropagation(); editQuote('${quote.id}')">‚úèÔ∏è</button>
                            <button class="btn btn-sm btn-secondary" onclick="event.stopPropagation(); analyzeQuote('${quote.id}')">üîç</button>
                        </td>
                    </tr>
                `;
            }).join('');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø–∞–≥–∏–Ω–∞—Ü–∏—é
            document.getElementById('pagination-range').textContent = `1-${demoQuotes.length}`;
            document.getElementById('pagination-total').textContent = demoQuotes.length;
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–ø –∞–≤—Ç–æ—Ä–æ–≤
            loadTopAuthors();
        }
        
        /**
         * –ó–∞–≥—Ä—É–∑–∫–∞ –≥—Ä–∞—Ñ–∏–∫–æ–≤ (–¥–µ–º–æ)
         */
        function loadChartsDemo() {
            // –ì—Ä–∞—Ñ–∏–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
            const categoriesCtx = document.getElementById('categoriesChart');
            if (categoriesCtx) {
                new Chart(categoriesCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['–°–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ', '–õ—é–±–æ–≤—å', '–ú—É–¥—Ä–æ—Å—Ç—å', '–§–∏–ª–æ—Å–æ—Ñ–∏—è', '–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ', '–ú–æ—Ç–∏–≤–∞—Ü–∏—è'],
                        datasets: [{
                            data: [34, 22, 18, 12, 8, 6],
                            backgroundColor: [
                                '#d4af37', '#c97a7e', '#81b3d3', '#a8c686', '#deb887', '#cd853f'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        }
                    }
                });
            }
            
            // –ì—Ä–∞—Ñ–∏–∫ –¥–∏–Ω–∞–º–∏–∫–∏
            const timelineCtx = document.getElementById('quotesTimelineChart');
            if (timelineCtx) {
                new Chart(timelineCtx, {
                    type: 'line',
                    data: {
                        labels: ['–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±', '–í—Å'],
                        datasets: [{
                            label: '–¶–∏—Ç–∞—Ç—ã',
                            data: [12, 19, 15, 25, 22, 18, 24],
                            borderColor: '#d4af37',
                            backgroundColor: 'rgba(212, 175, 55, 0.1)',
                            tension: 0.1
                        }]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
            }
        }
        
        /**
         * –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–ø –∞–≤—Ç–æ—Ä–æ–≤
         */
        function loadTopAuthors() {
            const container = document.getElementById('top-authors-list');
            if (!container) return;
            
            const topAuthors = [
                { name: '–õ–µ–≤ –¢–æ–ª—Å—Ç–æ–π', count: 234 },
                { name: '–≠—Ä–∏—Ö –§—Ä–æ–º–º', count: 189 },
                { name: '–ú–∞—Ä–∏–Ω–∞ –¶–≤–µ—Ç–∞–µ–≤–∞', count: 156 },
                { name: '–ë—É–¥–¥–∞', count: 134 },
                { name: '–†–∞–ª—å—Ñ –≠–º–µ—Ä—Å–æ–Ω', count: 98 }
            ];
            
            container.innerHTML = topAuthors.map((author, index) => `
                <div class="top-author-item">
                    <span class="rank">${index + 1}</span>
                    <span class="name">${author.name}</span>
                    <span class="count">${author.count}</span>
                </div>
            `).join('');
        }
        
        /**
         * –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
         */
        function getSentimentBadge(sentiment) {
            const sentimentMap = {
                'positive': '<span class="sentiment-badge sentiment-positive">üòä –ü–æ–∑–∏—Ç–∏–≤–Ω—ã–π</span>',
                'neutral': '<span class="sentiment-badge sentiment-neutral">üòê –ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π</span>',
                'negative': '<span class="sentiment-badge sentiment-negative">üòî –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–π</span>'
            };
            return sentimentMap[sentiment] || '<span class="sentiment-badge sentiment-neutral">‚ùì –ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω</span>';
        }
        
        /**
         * –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ü–∏—Ç–∞—Ç
         */
        function filterQuotes() {
            console.log('üìù –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ü–∏—Ç–∞—Ç');
            showNotification('info', '–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ü–∏—Ç–∞—Ç...');
        }
        
        /**
         * –≠–∫—Å–ø–æ—Ä—Ç —Ü–∏—Ç–∞—Ç
         */
        function exportQuotes() {
            console.log('üìù –≠–∫—Å–ø–æ—Ä—Ç —Ü–∏—Ç–∞—Ç');
            showNotification('success', '–≠–∫—Å–ø–æ—Ä—Ç —Ü–∏—Ç–∞—Ç –Ω–∞—á–∞—Ç');
        }
        
        /**
         * –ü—Ä–æ—Å–º–æ—Ç—Ä —Ü–∏—Ç–∞—Ç—ã
         */
        function viewQuote(quoteId) {
            console.log('üìù –ü—Ä–æ—Å–º–æ—Ç—Ä —Ü–∏—Ç–∞—Ç—ã:', quoteId);
            
            const modal = document.getElementById('quote-details-overlay');
            const content = document.getElementById('quote-details-content');
            const title = document.getElementById('quote-details-title');
            
            title.textContent = `üìù –¶–∏—Ç–∞—Ç–∞ ${quoteId}`;
            
            // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
            content.innerHTML = '<div class="loading">üìñ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–µ—Ç–∞–ª–µ–π...</div>';
            modal.style.display = 'flex';
            
            setTimeout(() => {
                content.innerHTML = `
                    <div class="quote-profile">
                        <div class="quote-main">
                            <div class="quote-text-full">
                                "–í –∫–∞–∂–¥–æ–º —Å–ª–æ–≤–µ ‚Äî —Ü–µ–ª–∞—è –∂–∏–∑–Ω—å. –ö–∞–∂–¥–æ–µ —Å–ª–æ–≤–æ –Ω–µ—Å–µ—Ç –≤ —Å–µ–±–µ –∏—Å—Ç–æ—Ä–∏—é, —ç–º–æ—Ü–∏—é, —Å–º—ã—Å–ª, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å –≤–æ—Å–ø—Ä–∏—è—Ç–∏–µ –º–∏—Ä–∞."
                            </div>
                            <div class="quote-author">‚Äî –ú–∞—Ä–∏–Ω–∞ –¶–≤–µ—Ç–∞–µ–≤–∞</div>
                        </div>
                        
                        <div class="quote-meta">
                            <div class="meta-section">
                                <h4>üìä –ê–Ω–∞–ª–∏–∑</h4>
                                <div class="meta-data">
                                    <div class="meta-item">
                                        <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
                                        <span class="category-badge">üé® –¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ</span>
                                    </div>
                                    <div class="meta-item">
                                        <label>–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ:</label>
                                        <span class="sentiment-badge sentiment-positive">üòä –ü–æ–∑–∏—Ç–∏–≤–Ω—ã–π</span>
                                    </div>
                                    <div class="meta-item">
                                        <label>–¢–µ–º—ã:</label>
                                        <span class="themes">–ø–æ—ç–∑–∏—è, —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ, –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="meta-section">
                                <h4>üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h4>
                                <div class="meta-data">
                                    <div class="meta-item">
                                        <label>–ò–º—è:</label>
                                        <span>–ú–∞—Ä–∏—è –ü–µ—Ç—Ä–æ–≤–∞</span>
                                    </div>
                                    <div class="meta-item">
                                        <label>Telegram:</label>
                                        <span>@maria_p</span>
                                    </div>
                                    <div class="meta-item">
                                        <label>–î–∞—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏:</label>
                                        <span>03.07.2025, 11:23</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="meta-section">
                                <h4>ü§ñ AI –ê–Ω–∞–ª–∏–∑</h4>
                                <div class="ai-analysis">
                                    <p>–≠—Ç–∞ —Ü–∏—Ç–∞—Ç–∞ –æ—Ç—Ä–∞–∂–∞–µ—Ç –≥–ª—É–±–æ–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Å–∏–ª—ã —Å–ª–æ–≤ –∏ —è–∑—ã–∫–∞. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–æ–∏—Å–∫–µ —Ç–≤–æ—Ä—á–µ—Å–∫–æ–≥–æ —Å–∞–º–æ–≤—ã—Ä–∞–∂–µ–Ω–∏—è –∏ –ø–æ–Ω–∏–º–∞–Ω–∏—è –≥–ª—É–±–∏–Ω–Ω–æ–≥–æ —Å–º—ã—Å–ª–∞ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã.</p>
                                    
                                    <p><strong>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:</strong> –ü–æ–¥—Ö–æ–¥–∏—Ç —Ä–∞–∑–±–æ—Ä "–ü–∏—Å—å–º–∞ –∫ –º–æ–ª–æ–¥–æ–º—É –ø–æ—ç—Ç—É" –†–∏–ª—å–∫–µ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è —Ç–≤–æ—Ä—á–µ—Å–∫–æ–≥–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–∞.</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="quote-actions">
                            <button class="btn btn-primary" onclick="addToKnowledgeBase('${quoteId}')">üìö –î–æ–±–∞–≤–∏—Ç—å –≤ –±–∞–∑—É –∑–Ω–∞–Ω–∏–π</button>
                            <button class="btn btn-secondary" onclick="similarQuotes('${quoteId}')">üîç –ü–æ—Ö–æ–∂–∏–µ —Ü–∏—Ç–∞—Ç—ã</button>
                            <button class="btn btn-secondary" onclick="flagQuote('${quoteId}')">üö© –û—Ç–º–µ—Ç–∏—Ç—å</button>
                        </div>
                    </div>
                `;
            }, 1000);
        }
        
        /**
         * –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–∏—Ç–∞—Ç—ã
         */
        function editQuote(quoteId) {
            console.log('üìù –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–∏—Ç–∞—Ç—ã:', quoteId);
            showNotification('info', `–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ${quoteId}`);
        }
        
        /**
         * –ê–Ω–∞–ª–∏–∑ —Ü–∏—Ç–∞—Ç—ã
         */
        function analyzeQuote(quoteId) {
            console.log('üìù –ê–Ω–∞–ª–∏–∑ —Ü–∏—Ç–∞—Ç—ã:', quoteId);
            showNotification('info', `AI –∞–Ω–∞–ª–∏–∑ ${quoteId} –∑–∞–ø—É—â–µ–Ω`);
        }
        
        /**
         * –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
         */
        function showNotification(type, message) {
            const container = document.getElementById('notification-container');
            if (!container) {
                alert(message);
                return;
            }
            
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <div class="notification-content">
                    <span class="notification-icon">${type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : 'üìù'}</span>
                    <span class="notification-message">${message}</span>
                </div>
                <button class="notification-close" onclick="this.parentElement.remove()">√ó</button>
            `;
            
            container.appendChild(notification);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 5000);
        }
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
        document.addEventListener('click', (e) => {
            if (e.target.id === 'close-quote-details' || e.target.closest('#close-quote-details')) {
                document.getElementById('quote-details-overlay').style.display = 'none';
            }
        });
    </script>
</body>
</html>