<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ - –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –ß–∏—Ç–∞—Ç–µ–ª—å</title>
    <link rel="stylesheet" href="css/main.css">
    <meta name="description" content="–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –ø—Ä–æ–µ–∫—Ç–∞ '–ß–∏—Ç–∞—Ç–µ–ª—å'">
    
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —à—Ä–∏—Ñ—Ç–æ–≤ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Crimson+Text:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- –ö–Ω–∏–∂–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è —Ñ–æ–Ω–∞ -->
    <div class="reader-bg-animation reader-bg-subtle" id="reader-matrix"></div>
    
    <div class="admin-layout">
        <!-- Header -->
        <header class="admin-header">
            <div class="logo-container">
                <div class="logo-icon">üìñ</div>
                <h1>–ß–∏—Ç–∞—Ç–µ–ª—å</h1>
                <span class="logo-subtitle">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</span>
            </div>
            
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html">üìä –î–∞—à–±–æ—Ä–¥</a></li>
                    <li><a href="users.html" class="active">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a></li>
                    <li><a href="quotes.html">üìù –¶–∏—Ç–∞—Ç—ã</a></li>
                    <li><a href="reports.html">üìà –û—Ç—á–µ—Ç—ã</a></li>
                    <li><a href="tickets.html">üé´ –û–±—Ä–∞—â–µ–Ω–∏—è</a></li>
                    <li><a href="knowledge.html">üìö –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π</a></li>
                    <li><a href="prompts.html">üí≠ –ü—Ä–æ–º–ø—Ç—ã</a></li>
                </ul>
            </nav>
            
            <div class="user-menu">
                <span id="admin-username">–ê–Ω–Ω–∞ –ë—É—Å–µ–ª</span>
                <button id="logout-btn" class="btn btn-text">–í—ã—Ö–æ–¥</button>
            </div>
        </header>
        
        <!-- Main content -->
        <main class="admin-content">
            <div class="dashboard-header">
                <h2>üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h2>
                <div class="header-actions">
                    <button class="btn btn-primary" onclick="exportUsers()">üì• –≠–∫—Å–ø–æ—Ä—Ç</button>
                </div>
            </div>
            
            <!-- –§–∏–ª—å—Ç—Ä—ã -->
            <div class="glow-card mb-4">
                <h3>üîç –§–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫</h3>
                <div class="filters-grid">
                    <div class="form-group">
                        <label for="search-users">–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ –∏–ª–∏ email:</label>
                        <input type="text" id="search-users" class="form-control" placeholder="–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –∏–º—è –∏–ª–∏ email">
                    </div>
                    <div class="form-group">
                        <label for="filter-source">–ò—Å—Ç–æ—á–Ω–∏–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</label>
                        <select id="filter-source" class="select-glow">
                            <option value="">–í—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏</option>
                            <option value="Instagram">Instagram</option>
                            <option value="Telegram">Telegram</option>
                            <option value="YouTube">YouTube</option>
                            <option value="Threads">Threads</option>
                            <option value="–î—Ä—É–∑—å—è">–û—Ç –¥—Ä—É–∑–µ–π</option>
                            <option value="–î—Ä—É–≥–æ–µ">–î—Ä—É–≥–æ–µ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="filter-status">–°—Ç–∞—Ç—É—Å:</label>
                        <select id="filter-status" class="select-glow">
                            <option value="">–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</option>
                            <option value="active">–ê–∫—Ç–∏–≤–Ω—ã–µ</option>
                            <option value="inactive">–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ</option>
                            <option value="completed_onboarding">–ó–∞–≤–µ—Ä—à–∏–ª–∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="filter-date">–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</label>
                        <select id="filter-date" class="select-glow">
                            <option value="">–ó–∞ –≤—Å–µ –≤—Ä–µ–º—è</option>
                            <option value="today">–°–µ–≥–æ–¥–Ω—è</option>
                            <option value="week">–ó–∞ –Ω–µ–¥–µ–ª—é</option>
                            <option value="month">–ó–∞ –º–µ—Å—è—Ü</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div class="stats-cards">
                <div class="stat-card glow-card">
                    <div class="stat-header">
                        <h3>–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h3>
                        <div class="stat-icon">üë•</div>
                    </div>
                    <div class="stat-value" id="total-users">--</div>
                    <div class="stat-change positive">+12% –∑–∞ –º–µ—Å—è—Ü</div>
                </div>
                
                <div class="stat-card glow-card">
                    <div class="stat-header">
                        <h3>–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
                        <div class="stat-icon">üî•</div>
                    </div>
                    <div class="stat-value" id="active-users">--</div>
                    <div class="stat-change positive">+8% –∑–∞ –Ω–µ–¥–µ–ª—é</div>
                </div>
                
                <div class="stat-card glow-card">
                    <div class="stat-header">
                        <h3>–ù–æ–≤—ã–µ –∑–∞ –º–µ—Å—è—Ü</h3>
                        <div class="stat-icon">‚ú®</div>
                    </div>
                    <div class="stat-value" id="new-users">--</div>
                    <div class="stat-change positive">+25% –∫ –ø—Ä–æ—à–ª–æ–º—É –º–µ—Å—è—Ü—É</div>
                </div>
                
                <div class="stat-card glow-card">
                    <div class="stat-header">
                        <h3>–°—Ä–µ–¥–Ω–∏–π retention</h3>
                        <div class="stat-icon">üìà</div>
                    </div>
                    <div class="stat-value" id="retention-rate">--</div>
                    <div class="stat-change positive">+5% –∫ –ø—Ä–æ—à–ª–æ–º—É –º–µ—Å—è—Ü—É</div>
                </div>
            </div>
            
            <!-- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
            <div class="glow-card">
                <div class="section-header">
                    <h3>üìã –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h3>
                    <div class="table-controls">
                        <span class="results-count">–ù–∞–π–¥–µ–Ω–æ: <span id="users-count">0</span> –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</span>
                    </div>
                </div>
                
                <div class="table-container">
                    <table class="data-table" id="users-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>–ò–º—è</th>
                                <th>Email</th>
                                <th>–ò—Å—Ç–æ—á–Ω–∏–∫</th>
                                <th>–¶–∏—Ç–∞—Ç</th>
                                <th>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</th>
                                <th>–ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="users-table-body">
                            <tr class="table-loading">
                                <td colspan="9">üìñ –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
                <div class="pagination" id="users-pagination">
                    <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ JavaScript -->
                </div>
            </div>
        </main>
        
        <!-- Footer -->
        <footer class="admin-footer">
            <p>üìñ "–ß–∏—Ç–∞—Ç–µ–ª—å" - –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</p>
            <p class="copyright">¬© 2025 –ê–Ω–Ω–∞ –ë—É—Å–µ–ª. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </footer>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <div class="modal-overlay" id="user-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üë§ –î–µ—Ç–∞–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body" id="user-modal-content">
                <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
        </div>
    </div>
    
    <!-- Notification system -->
    <div class="notification-container" id="notification-container"></div>
    
    <!-- Scripts -->
    <script src="js/auth.js"></script>
    <script src="js/main.js"></script>
    
    <script>
        /**
         * –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
         */
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üë• –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π');
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
            if (typeof checkAuthStatus === 'function') {
                checkAuthStatus();
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            initUsersPage();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏
            if (typeof initReaderMatrix === 'function') {
                initReaderMatrix(true);
            }
        });
        
        /**
         * –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
         */
        function initUsersPage() {
            loadUsersStats();
            loadUsersTable();
            setupFilters();
        }
        
        /**
         * –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
         */
        function loadUsersStats() {
            // –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
            setTimeout(() => {
                document.getElementById('total-users').textContent = '1,247';
                document.getElementById('active-users').textContent = '423';
                document.getElementById('new-users').textContent = '156';
                document.getElementById('retention-rate').textContent = '68%';
            }, 500);
        }
        
        /**
         * –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∞–±–ª–∏—Ü—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
         */
        function loadUsersTable() {
            const tbody = document.getElementById('users-table-body');
            
            // –ó–∞–≥–ª—É—à–∫–∞ —Å –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–º–∏
            setTimeout(() => {
                const demoUsers = [
                    {
                        id: 'USR001',
                        name: '–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞',
                        email: 'maria@example.com',
                        source: 'Instagram',
                        quotes: 23,
                        registered: '2025-01-15',
                        lastActive: '2 —á–∞—Å–∞ –Ω–∞–∑–∞–¥',
                        status: 'active'
                    },
                    {
                        id: 'USR002', 
                        name: '–ï–ª–µ–Ω–∞ –ü–µ—Ç—Ä–æ–≤–∞',
                        email: 'elena@example.com',
                        source: 'Telegram',
                        quotes: 45,
                        registered: '2025-01-10',
                        lastActive: '1 –¥–µ–Ω—å –Ω–∞–∑–∞–¥',
                        status: 'active'
                    },
                    {
                        id: 'USR003',
                        name: '–ê–Ω–Ω–∞ –°–∏–¥–æ—Ä–æ–≤–∞',
                        email: 'anna@example.com', 
                        source: 'YouTube',
                        quotes: 12,
                        registered: '2025-01-20',
                        lastActive: '3 –¥–Ω—è –Ω–∞–∑–∞–¥',
                        status: 'inactive'
                    }
                ];
                
                tbody.innerHTML = demoUsers.map(user => `
                    <tr onclick="viewUser('${user.id}')">
                        <td>${user.id}</td>
                        <td><strong>${user.name}</strong></td>
                        <td>${user.email}</td>
                        <td><span class="source-badge source-${user.source.toLowerCase()}">${user.source}</span></td>
                        <td>${user.quotes}</td>
                        <td>${formatDate(user.registered)}</td>
                        <td>${user.lastActive}</td>
                        <td><span class="status-badge status-${user.status}">${getStatusText(user.status)}</span></td>
                        <td>
                            <button class="btn btn-sm" onclick="event.stopPropagation(); viewUser('${user.id}')">–ü—Ä–æ—Å–º–æ—Ç—Ä</button>
                        </td>
                    </tr>
                `).join('');
                
                document.getElementById('users-count').textContent = demoUsers.length;
            }, 1000);
        }
        
        /**
         * –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤
         */
        function setupFilters() {
            const searchInput = document.getElementById('search-users');
            const sourceFilter = document.getElementById('filter-source');
            const statusFilter = document.getElementById('filter-status');
            const dateFilter = document.getElementById('filter-date');
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
            [searchInput, sourceFilter, statusFilter, dateFilter].forEach(element => {
                element.addEventListener('change', applyFilters);
                if (element.tagName === 'INPUT') {
                    element.addEventListener('input', debounce(applyFilters, 300));
                }
            });
        }
        
        /**
         * –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
         */
        function applyFilters() {
            console.log('üë• –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤');
            // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –ª–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
            showNotification('info', '–§–∏–ª—å—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω–µ–Ω—ã');
        }
        
        /**
         * –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
         */
        function viewUser(userId) {
            console.log('üë• –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', userId);
            
            const modalContent = document.getElementById('user-modal-content');
            modalContent.innerHTML = `
                <div class="user-details">
                    <div class="user-header">
                        <div class="user-avatar">üë§</div>
                        <div class="user-info">
                            <h4>–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞</h4>
                            <p>maria@example.com</p>
                            <span class="status-badge status-active">–ê–∫—Ç–∏–≤–Ω—ã–π</span>
                        </div>
                    </div>
                    
                    <div class="user-stats">
                        <div class="stat-item">
                            <span class="stat-label">–¶–∏—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ:</span>
                            <span class="stat-value">23</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">–î–Ω–µ–π —Å –±–æ—Ç–æ–º:</span>
                            <span class="stat-value">18</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">–ò—Å—Ç–æ—á–Ω–∏–∫:</span>
                            <span class="stat-value">Instagram</span>
                        </div>
                    </div>
                    
                    <div class="user-test-results">
                        <h5>üìù –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞:</h5>
                        <ul>
                            <li><strong>–ò–º—è:</strong> –ú–∞—Ä–∏—è</li>
                            <li><strong>–û —Å–µ–±–µ:</strong> –ú–∞–º–∞ (–¥–µ—Ç–∏ - –≥–ª–∞–≤–Ω–∞—è –∑–∞–±–æ—Ç–∞)</li>
                            <li><strong>–í—Ä–µ–º—è –¥–ª—è —Å–µ–±—è:</strong> –ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –¥–µ—Ç–∏ –ª—è–≥—É—Ç —Å–ø–∞—Ç—å</li>
                            <li><strong>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã:</strong> –°–µ–º—å—è –∏ –ª–∏—á–Ω–æ—Å—Ç–Ω—ã–π —Ä–æ—Å—Ç</li>
                        </ul>
                    </div>
                    
                    <div class="user-actions">
                        <button class="btn btn-primary" onclick="sendMessage('${userId}')">üí¨ –ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</button>
                        <button class="btn btn-secondary" onclick="viewUserQuotes('${userId}')">üìù –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ü–∏—Ç–∞—Ç—ã</button>
                    </div>
                </div>
            `;
            
            openModal('user-modal');
        }
        
        /**
         * –≠–∫—Å–ø–æ—Ä—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
         */
        function exportUsers() {
            showNotification('info', '–ù–∞—á–∏–Ω–∞–µ–º —ç–∫—Å–ø–æ—Ä—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...');
            
            // –ó–∞–≥–ª—É—à–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞
            setTimeout(() => {
                showNotification('success', '–≠–∫—Å–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω. –§–∞–π–ª —Å–∫–∞—á–∞–Ω.');
            }, 2000);
        }
        
        /**
         * –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
         */
        function sendMessage(userId) {
            console.log('üí¨ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:', userId);
            showNotification('info', '–§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ');
        }
        
        /**
         * –ü—Ä–æ—Å–º–æ—Ç—Ä —Ü–∏—Ç–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
         */
        function viewUserQuotes(userId) {
            window.location.href = `quotes.html?user=${userId}`;
        }
        
        /**
         * –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —Å—Ç–∞—Ç—É—Å–∞
         */
        function getStatusText(status) {
            const statuses = {
                'active': '–ê–∫—Ç–∏–≤–Ω—ã–π',
                'inactive': '–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–π',
                'completed_onboarding': '–ü—Ä–æ—à–µ–ª –æ–Ω–±–æ—Ä–¥–∏–Ω–≥'
            };
            return statuses[status] || status;
        }
        
        /**
         * –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã
         */
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('ru-RU', {
                year: 'numeric',
                month: 'short',
                day: 'numeric'
            });
        }
        
        /**
         * –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
         */
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }
        
        /**
         * –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
         */
        function closeModal() {
            const activeModal = document.querySelector('.modal-overlay.active');
            if (activeModal) {
                activeModal.classList.remove('active');
                document.body.style.overflow = '';
            }
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal-close') || e.target.classList.contains('modal-overlay')) {
                closeModal();
            }
        });
        
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeModal();
            }
        });
    </script>
    
    <style>
        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π */
        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .source-badge {
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .source-instagram { background: #e1306c; color: white; }
        .source-telegram { background: #0088cc; color: white; }
        .source-youtube { background: #ff0000; color: white; }
        .source-threads { background: #000000; color: white; }
        .source-–¥—Ä—É–∑—å—è { background: var(--reader-gold); color: var(--dark-bg); }
        .source-–¥—Ä—É–≥–æ–µ { background: var(--text-muted); color: white; }
        
        .table-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .results-count {
            color: var(--text-muted);
            font-size: 0.9rem;
        }
        
        .user-details {
            padding: 1rem;
        }
        
        .user-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }
        
        .user-avatar {
            font-size: 3rem;
            background: var(--reader-gold);
            color: var(--dark-bg);
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .user-info h4 {
            margin: 0 0 0.5rem 0;
            color: var(--text-white);
        }
        
        .user-info p {
            margin: 0 0 0.5rem 0;
            color: var(--text-muted);
        }
        
        .user-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .stat-item {
            background: var(--hover-bg);
            padding: 1rem;
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
        }
        
        .stat-label {
            display: block;
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }
        
        .stat-value {
            display: block;
            color: var(--text-white);
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .user-test-results {
            margin-bottom: 1.5rem;
        }
        
        .user-test-results h5 {
            color: var(--reader-gold);
            margin-bottom: 1rem;
        }
        
        .user-test-results ul {
            list-style: none;
            padding: 0;
        }
        
        .user-test-results li {
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-light);
        }
        
        .user-test-results li:last-child {
            border-bottom: none;
        }
        
        .user-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }
        
        .data-table tr {
            cursor: pointer;
            transition: background-color var(--transition-fast);
        }
        
        .data-table tr:hover {
            background: rgba(212, 175, 55, 0.05);
        }
        
        @media (max-width: 768px) {
            .filters-grid {
                grid-template-columns: 1fr;
            }
            
            .user-header {
                flex-direction: column;
                text-align: center;
            }
            
            .user-stats {
                grid-template-columns: 1fr;
            }
            
            .user-actions {
                flex-direction: column;
            }
        }
    </style>
</body>
</html>