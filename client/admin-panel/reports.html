<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìà –û—Ç—á–µ—Ç—ã - –ß–∏—Ç–∞—Ç–µ–ª—å –ê–¥–º–∏–Ω</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/reports.css">
    <meta name="description" content="–ü–æ–¥—Ä–æ–±–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ '–ß–∏—Ç–∞—Ç–µ–ª—å'">
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —à—Ä–∏—Ñ—Ç–æ–≤ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Crimson+Text:wght@400;600&display=swap" rel="stylesheet">
    <!-- Chart.js –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- –¢–æ–Ω–∫–∞—è –∫–Ω–∏–∂–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è -->
    <div class="reader-bg-animation reader-bg-subtle" id="reader-matrix"></div>
    
    <div class="admin-layout">
        <!-- Header -->
        <header class="admin-header">
            <div class="logo-container">
                <div class="logo-icon">üìñ</div>
                <h1>–ß–∏—Ç–∞—Ç–µ–ª—å</h1>
                <span class="logo-subtitle">–û—Ç—á–µ—Ç—ã</span>
            </div>
            
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html">üìä –î–∞—à–±–æ—Ä–¥</a></li>
                    <li><a href="users.html">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a></li>
                    <li><a href="quotes.html">üìù –¶–∏—Ç–∞—Ç—ã</a></li>
                    <li><a href="reports.html" class="active">üìà –û—Ç—á–µ—Ç—ã</a></li>
                    <li><a href="knowledge.html">üìö –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π</a></li>
                    <li><a href="tickets.html">üé´ –û–±—Ä–∞—â–µ–Ω–∏—è</a></li>
                    <li><a href="prompts.html">üí≠ –ü—Ä–æ–º–ø—Ç—ã</a></li>
                </ul>
            </nav>
            
            <div class="user-menu">
                <span id="admin-username">–ê–Ω–Ω–∞ –ë—É—Å–µ–ª</span>
                <button id="logout-btn" class="btn btn-text">–í—ã—Ö–æ–¥</button>
            </div>
        </header>
        
        <!-- Main content -->
        <main class="admin-content reports-content">
            <div class="reports-header">
                <h2>üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –û—Ç—á–µ—Ç—ã</h2>
                <div class="reports-actions">
                    <div class="filter-group">
                        <select id="report-type" class="select-glow">
                            <option value="overview">üìä –û–±—â–∏–π –æ–±–∑–æ—Ä</option>
                            <option value="users">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</option>
                            <option value="quotes">üìù –¶–∏—Ç–∞—Ç—ã</option>
                            <option value="weekly">üìÖ –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã</option>
                            <option value="monthly">üìÜ –ú–µ—Å—è—á–Ω—ã–µ –æ—Ç—á–µ—Ç—ã</option>
                            <option value="retention">üîÑ Retention</option>
                            <option value="conversion">üí∞ –ö–æ–Ω–≤–µ—Ä—Å–∏—è</option>
                        </select>
                        
                        <select id="period-selector" class="select-glow">
                            <option value="7d">7 –¥–Ω–µ–π</option>
                            <option value="30d" selected>30 –¥–Ω–µ–π</option>
                            <option value="90d">90 –¥–Ω–µ–π</option>
                            <option value="1y">1 –≥–æ–¥</option>
                            <option value="custom">–ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥</option>
                        </select>
                        
                        <input type="date" id="date-from" class="date-input" style="display: none;">
                        <input type="date" id="date-to" class="date-input" style="display: none;">
                    </div>
                    
                    <div class="action-buttons">
                        <button id="generate-report" class="btn btn-primary btn-glow">
                            <span class="btn-text">üìã –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å</span>
                        </button>
                        <button id="export-report" class="btn btn-secondary btn-glow">
                            <span class="btn-text">üìä –≠–∫—Å–ø–æ—Ä—Ç</span>
                        </button>
                        <button id="schedule-report" class="btn btn-secondary btn-glow">
                            <span class="btn-text">‚è∞ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Report overview cards -->
            <div class="report-overview">
                <div class="overview-card glow-card">
                    <div class="overview-header">
                        <h3>üìä –¢–µ–∫—É—â–∏–π –ø–µ—Ä–∏–æ–¥</h3>
                        <span class="period-label" id="current-period">30 –¥–Ω–µ–π</span>
                    </div>
                    <div class="overview-stats">
                        <div class="stat-group">
                            <div class="stat-item">
                                <span class="stat-value">1,247</span>
                                <span class="stat-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</span>
                                <span class="stat-change positive">+15%</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value">8,734</span>
                                <span class="stat-label">–¶–∏—Ç–∞—Ç—ã</span>
                                <span class="stat-change positive">+23%</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value">423</span>
                                <span class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã–µ</span>
                                <span class="stat-change positive">+8%</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value">89</span>
                                <span class="stat-label">–ó–∞–≤–µ—Ä—à–∏–ª–∏ –º–µ—Å—è—Ü</span>
                                <span class="stat-change positive">+22%</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="overview-card glow-card">
                    <div class="overview-header">
                        <h3>üí∞ –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –ø—Ä–æ–¥–∞–∂–∏</h3>
                        <span class="conversion-rate">12.3%</span>
                    </div>
                    <div class="conversion-funnel">
                        <div class="funnel-step">
                            <span class="funnel-label">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</span>
                            <div class="funnel-bar">
                                <div class="funnel-fill" style="width: 100%"></div>
                            </div>
                            <span class="funnel-value">1,247 (100%)</span>
                        </div>
                        <div class="funnel-step">
                            <span class="funnel-label">–ü—Ä–æ—à–ª–∏ —Ç–µ—Å—Ç</span>
                            <div class="funnel-bar">
                                <div class="funnel-fill" style="width: 89%"></div>
                            </div>
                            <span class="funnel-value">1,110 (89%)</span>
                        </div>
                        <div class="funnel-step">
                            <span class="funnel-label">–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</span>
                            <div class="funnel-bar">
                                <div class="funnel-fill" style="width: 34%"></div>
                            </div>
                            <span class="funnel-value">423 (34%)</span>
                        </div>
                        <div class="funnel-step">
                            <span class="funnel-label">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –ø—Ä–æ–º–æ–∫–æ–¥</span>
                            <div class="funnel-bar">
                                <div class="funnel-fill" style="width: 12%"></div>
                            </div>
                            <span class="funnel-value">153 (12.3%)</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Charts section -->
            <div class="reports-charts">
                <div class="chart-card glow-card chart-large">
                    <div class="chart-header">
                        <h3>üìà –î–∏–Ω–∞–º–∏–∫–∞ —Ä–æ—Å—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h3>
                        <div class="chart-controls">
                            <button class="chart-control active" data-metric="users">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</button>
                            <button class="chart-control" data-metric="quotes">–¶–∏—Ç–∞—Ç—ã</button>
                            <button class="chart-control" data-metric="active">–ê–∫—Ç–∏–≤–Ω—ã–µ</button>
                        </div>
                    </div>
                    <canvas id="growthChart" width="800" height="400"></canvas>
                </div>
                
                <div class="chart-card glow-card">
                    <h3>üéØ –ò—Å—Ç–æ—á–Ω–∏–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞</h3>
                    <canvas id="trafficSourcesChart" width="400" height="300"></canvas>
                </div>
                
                <div class="chart-card glow-card">
                    <h3>üìö –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ü–∏—Ç–∞—Ç</h3>
                    <canvas id="categoriesChart" width="400" height="300"></canvas>
                </div>
                
                <div class="chart-card glow-card chart-large">
                    <h3>üîÑ Retention –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –∫–æ–≥–æ—Ä—Ç–∞–º</h3>
                    <canvas id="retentionChart" width="800" height="400"></canvas>
                </div>
            </div>
            
            <!-- Report tables -->
            <div class="report-tables">
                <div class="table-card glow-card">
                    <div class="table-header">
                        <h3>üìä –¢–æ–ø –∫–Ω–∏–≥–∏ –ø–æ –ø–µ—Ä–µ—Ö–æ–¥–∞–º</h3>
                        <span class="table-period">–ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π</span>
                    </div>
                    <div class="table-container">
                        <table class="data-table" id="books-conversion-table">
                            <thead>
                                <tr>
                                    <th>–ö–Ω–∏–≥–∞/–ö—É—Ä—Å</th>
                                    <th>–ü–µ—Ä–µ—Ö–æ–¥—ã</th>
                                    <th>–ö–æ–Ω–≤–µ—Ä—Å–∏—è</th>
                                    <th>–ü—Ä–æ–º–æ–∫–æ–¥—ã</th>
                                    <th>–î–æ—Ö–æ–¥</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>–ò—Å–∫—É—Å—Å—Ç–≤–æ –ª—é–±–∏—Ç—å</strong> (–§—Ä–æ–º–º)</td>
                                    <td>234</td>
                                    <td><span class="conversion-rate">18.2%</span></td>
                                    <td>42</td>
                                    <td>$336</td>
                                </tr>
                                <tr>
                                    <td><strong>–ü–∏—Å—å–º–∞ –∫ –º–æ–ª–æ–¥–æ–º—É –ø–æ—ç—Ç—É</strong> (–†–∏–ª—å–∫–µ)</td>
                                    <td>189</td>
                                    <td><span class="conversion-rate">15.3%</span></td>
                                    <td>29</td>
                                    <td>$232</td>
                                </tr>
                                <tr>
                                    <td><strong>–ë—ã—Ç—å —Å–æ–±–æ–π</strong> (–∫—É—Ä—Å)</td>
                                    <td>156</td>
                                    <td><span class="conversion-rate">22.4%</span></td>
                                    <td>35</td>
                                    <td>$420</td>
                                </tr>
                                <tr>
                                    <td><strong>–ñ–µ–Ω—â–∏–Ω–∞, –∫–æ—Ç–æ—Ä–∞—è —á–∏—Ç–∞–µ—Ç</strong></td>
                                    <td>134</td>
                                    <td><span class="conversion-rate">12.7%</span></td>
                                    <td>17</td>
                                    <td>$170</td>
                                </tr>
                                <tr>
                                    <td><strong>–ê–ª—Ö–∏–º–∏–∫</strong> (–ö–æ—ç–ª—å–æ)</td>
                                    <td>98</td>
                                    <td><span class="conversion-rate">16.3%</span></td>
                                    <td>16</td>
                                    <td>$128</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div class="table-card glow-card">
                    <div class="table-header">
                        <h3>üéÅ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤</h3>
                        <span class="table-period">–ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π</span>
                    </div>
                    <div class="table-container">
                        <table class="data-table" id="promocodes-table">
                            <thead>
                                <tr>
                                    <th>–ü—Ä–æ–º–æ–∫–æ–¥</th>
                                    <th>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π</th>
                                    <th>–°–∫–∏–¥–∫–∞</th>
                                    <th>–≠–∫–æ–Ω–æ–º–∏—è</th>
                                    <th>–°—Ç–∞—Ç—É—Å</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>READER20</code></td>
                                    <td>89</td>
                                    <td>20%</td>
                                    <td>$178</td>
                                    <td><span class="status-badge status-success">–ê–∫—Ç–∏–≤–Ω—ã–π</span></td>
                                </tr>
                                <tr>
                                    <td><code>MONTH25</code></td>
                                    <td>67</td>
                                    <td>25%</td>
                                    <td>$167</td>
                                    <td><span class="status-badge status-success">–ê–∫—Ç–∏–≤–Ω—ã–π</span></td>
                                </tr>
                                <tr>
                                    <td><code>WISDOM15</code></td>
                                    <td>45</td>
                                    <td>15%</td>
                                    <td>$67</td>
                                    <td><span class="status-badge status-warning">–ò—Å—Ç–µ–∫–∞–µ—Ç</span></td>
                                </tr>
                                <tr>
                                    <td><code>LOVE20</code></td>
                                    <td>34</td>
                                    <td>20%</td>
                                    <td>$68</td>
                                    <td><span class="status-badge status-success">–ê–∫—Ç–∏–≤–Ω—ã–π</span></td>
                                </tr>
                                <tr>
                                    <td><code>POETRY10</code></td>
                                    <td>23</td>
                                    <td>10%</td>
                                    <td>$23</td>
                                    <td><span class="status-badge status-danger">–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–π</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- Weekly/Monthly report status -->
            <div class="automation-status glow-card">
                <div class="automation-header">
                    <h3>ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á–µ—Ç—ã</h3>
                    <div class="automation-toggle">
                        <label class="switch">
                            <input type="checkbox" id="automation-enabled" checked>
                            <span class="slider"></span>
                        </label>
                        <span class="toggle-label">–í–∫–ª—é—á–µ–Ω–æ</span>
                    </div>
                </div>
                
                <div class="automation-stats">
                    <div class="automation-stat">
                        <div class="stat-icon">üìÖ</div>
                        <div class="stat-info">
                            <div class="stat-title">–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã</div>
                            <div class="stat-detail">–ü–æ—Å–ª–µ–¥–Ω–∏–π: –í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ 11:00 | –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: 423 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º</div>
                            <div class="stat-next">–°–ª–µ–¥—É—é—â–∏–π: —á–µ—Ä–µ–∑ 2 –¥–Ω—è</div>
                        </div>
                        <div class="stat-status">
                            <span class="status-badge status-success">‚úÖ –ê–∫—Ç–∏–≤–Ω–æ</span>
                        </div>
                    </div>
                    
                    <div class="automation-stat">
                        <div class="stat-icon">üìÜ</div>
                        <div class="stat-info">
                            <div class="stat-title">–ú–µ—Å—è—á–Ω—ã–µ –æ—Ç—á–µ—Ç—ã</div>
                            <div class="stat-detail">–ü–æ—Å–ª–µ–¥–Ω–∏–π: 1 –∏—é–ª—è | –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: 89 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º</div>
                            <div class="stat-next">–°–ª–µ–¥—É—é—â–∏–π: —á–µ—Ä–µ–∑ 28 –¥–Ω–µ–π</div>
                        </div>
                        <div class="stat-status">
                            <span class="status-badge status-success">‚úÖ –ê–∫—Ç–∏–≤–Ω–æ</span>
                        </div>
                    </div>
                    
                    <div class="automation-stat">
                        <div class="stat-icon">üîî</div>
                        <div class="stat-info">
                            <div class="stat-title">–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è</div>
                            <div class="stat-detail">–ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 9:00 –∏ 19:00 | –ü–æ–ª—É—á–∞—é—Ç: 1,247 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                            <div class="stat-next">–°–ª–µ–¥—É—é—â–µ–µ: —Å–µ–≥–æ–¥–Ω—è –≤ 19:00</div>
                        </div>
                        <div class="stat-status">
                            <span class="status-badge status-success">‚úÖ –ê–∫—Ç–∏–≤–Ω–æ</span>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Footer -->
        <footer class="admin-footer">
            <p>üìà "–ß–∏—Ç–∞—Ç–µ–ª—å" - –ü–æ–¥—Ä–æ–±–Ω–∞—è –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –û—Ç—á–µ—Ç–Ω–æ—Å—Ç—å</p>
            <p class="copyright">¬© 2025 –ê–Ω–Ω–∞ –ë—É—Å–µ–ª. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </footer>
    </div>
    
    <!-- Notification system -->
    <div class="notification-container" id="notification-container"></div>
    
    <!-- Scripts -->
    <script src="js/auth.js"></script>
    <script src="js/reports.js"></script>
    
    <script>
        /**
         * –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ—Ç—á–µ—Ç–æ–≤
         */
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üìà –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤');
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
            if (typeof checkAuthStatus === 'function') {
                checkAuthStatus();
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ—Ç—á–µ—Ç–æ–≤
            if (typeof initReportsPage === 'function') {
                initReportsPage();
            } else {
                console.log('üìà –§—É–Ω–∫—Ü–∏—è initReportsPage –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º –±–∞–∑–æ–≤—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é');
                initBasicReports();
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–Ω–∏–∂–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏
            if (typeof initReaderMatrix === 'function') {
                initReaderMatrix(true); // subtle mode –¥–ª—è —Ä–∞–±–æ—á–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
            }
        });
        
        /**
         * –ë–∞–∑–æ–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤
         */
        function initBasicReports() {
            console.log('üìà –ë–∞–∑–æ–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤');
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ –≥—Ä–∞—Ñ–∏–∫–æ–≤
            loadChartsDemo();
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
            setupEventHandlers();
        }
        
        /**
         * –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
         */
        function setupEventHandlers() {
            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–∏–ø–∞ –æ—Ç—á–µ—Ç–∞
            const reportTypeSelect = document.getElementById('report-type');
            if (reportTypeSelect) {
                reportTypeSelect.addEventListener('change', updateReportView);
            }
            
            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∞
            const periodSelect = document.getElementById('period-selector');
            if (periodSelect) {
                periodSelect.addEventListener('change', handlePeriodChange);
            }
            
            // –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π
            const generateBtn = document.getElementById('generate-report');
            const exportBtn = document.getElementById('export-report');
            const scheduleBtn = document.getElementById('schedule-report');
            
            if (generateBtn) {
                generateBtn.addEventListener('click', generateReport);
            }
            if (exportBtn) {
                exportBtn.addEventListener('click', exportReport);
            }
            if (scheduleBtn) {
                scheduleBtn.addEventListener('click', scheduleReport);
            }
            
            // –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏ –≤ –≥—Ä–∞—Ñ–∏–∫–∞—Ö
            const chartControls = document.querySelectorAll('.chart-control');
            chartControls.forEach(control => {
                control.addEventListener('click', (e) => {
                    chartControls.forEach(c => c.classList.remove('active'));
                    e.target.classList.add('active');
                    updateGrowthChart(e.target.dataset.metric);
                });
            });
            
            // –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
            const automationToggle = document.getElementById('automation-enabled');
            if (automationToggle) {
                automationToggle.addEventListener('change', toggleAutomation);
            }
        }
        
        /**
         * –ó–∞–≥—Ä—É–∑–∫–∞ –≥—Ä–∞—Ñ–∏–∫–æ–≤ (–¥–µ–º–æ)
         */
        function loadChartsDemo() {
            // –ì—Ä–∞—Ñ–∏–∫ —Ä–æ—Å—Ç–∞
            const growthCtx = document.getElementById('growthChart');
            if (growthCtx) {
                window.growthChart = new Chart(growthCtx, {
                    type: 'line',
                    data: {
                        labels: ['1 –∏—é–ª', '7 –∏—é–ª', '14 –∏—é–ª', '21 –∏—é–ª', '28 –∏—é–ª'],
                        datasets: [{
                            label: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏',
                            data: [850, 920, 1050, 1150, 1247],
                            borderColor: '#d4af37',
                            backgroundColor: 'rgba(212, 175, 55, 0.1)',
                            tension: 0.1,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: false
                            }
                        }
                    }
                });
            }
            
            // –ì—Ä–∞—Ñ–∏–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Ç—Ä–∞—Ñ–∏–∫–∞
            const trafficCtx = document.getElementById('trafficSourcesChart');
            if (trafficCtx) {
                new Chart(trafficCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Instagram', 'Telegram', 'YouTube', 'Threads', '–î—Ä—É–∑—å—è', '–î—Ä—É–≥–æ–µ'],
                        datasets: [{
                            data: [35, 25, 18, 12, 7, 3],
                            backgroundColor: [
                                '#E1306C', '#0088cc', '#FF0000', '#000000', '#8b4513', '#666666'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        }
                    }
                });
            }
            
            // –ì—Ä–∞—Ñ–∏–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
            const categoriesCtx = document.getElementById('categoriesChart');
            if (categoriesCtx) {
                new Chart(categoriesCtx, {
                    type: 'bar',
                    data: {
                        labels: ['–°–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ', '–õ—é–±–æ–≤—å', '–ú—É–¥—Ä–æ—Å—Ç—å', '–§–∏–ª–æ—Å–æ—Ñ–∏—è', '–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ'],
                        datasets: [{
                            label: '–¶–∏—Ç–∞—Ç—ã',
                            data: [2967, 1921, 1571, 1048, 698],
                            backgroundColor: '#d4af37'
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
            }
            
            // –ì—Ä–∞—Ñ–∏–∫ retention
            const retentionCtx = document.getElementById('retentionChart');
            if (retentionCtx) {
                new Chart(retentionCtx, {
                    type: 'line',
                    data: {
                        labels: ['–ù–µ–¥–µ–ª—è 1', '–ù–µ–¥–µ–ª—è 2', '–ù–µ–¥–µ–ª—è 3', '–ù–µ–¥–µ–ª—è 4'],
                        datasets: [
                            {
                                label: '–ò—é–Ω—å 2025',
                                data: [100, 78, 65, 52],
                                borderColor: '#d4af37',
                                backgroundColor: 'rgba(212, 175, 55, 0.1)'
                            },
                            {
                                label: '–ú–∞–π 2025',
                                data: [100, 72, 58, 45],
                                borderColor: '#c97a7e',
                                backgroundColor: 'rgba(201, 122, 126, 0.1)'
                            },
                            {
                                label: '–ê–ø—Ä–µ–ª—å 2025',
                                data: [100, 69, 54, 41],
                                borderColor: '#81b3d3',
                                backgroundColor: 'rgba(129, 179, 211, 0.1)'
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100,
                                ticks: {
                                    callback: function(value) {
                                        return value + '%';
                                    }
                                }
                            }
                        }
                    }
                });
            }
        }
        
        /**
         * –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –æ—Ç—á–µ—Ç–∞
         */
        function updateReportView() {
            const reportType = document.getElementById('report-type').value;
            console.log('üìà –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Ç–∏–ø –æ—Ç—á–µ—Ç–∞:', reportType);
            showNotification('info', `–ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ç—á–µ—Ç–∞: ${reportType}`);
        }
        
        /**
         * –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–∏–æ–¥–∞
         */
        function handlePeriodChange() {
            const period = document.getElementById('period-selector').value;
            const dateFrom = document.getElementById('date-from');
            const dateTo = document.getElementById('date-to');
            
            if (period === 'custom') {
                dateFrom.style.display = 'inline-block';
                dateTo.style.display = 'inline-block';
            } else {
                dateFrom.style.display = 'none';
                dateTo.style.display = 'none';
            }
            
            console.log('üìà –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∞:', period);
        }
        
        /**
         * –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞ —Ä–æ—Å—Ç–∞
         */
        function updateGrowthChart(metric) {
            if (!window.growthChart) return;
            
            const datasets = {
                users: {
                    label: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏',
                    data: [850, 920, 1050, 1150, 1247],
                    borderColor: '#d4af37'
                },
                quotes: {
                    label: '–¶–∏—Ç–∞—Ç—ã',
                    data: [2100, 2850, 4200, 6300, 8734],
                    borderColor: '#c97a7e'
                },
                active: {
                    label: '–ê–∫—Ç–∏–≤–Ω—ã–µ',
                    data: [289, 312, 356, 389, 423],
                    borderColor: '#81b3d3'
                }
            };
            
            const newData = datasets[metric] || datasets.users;
            window.growthChart.data.datasets[0] = {
                ...newData,
                backgroundColor: newData.borderColor + '20',
                tension: 0.1,
                fill: true
            };
            window.growthChart.update();
        }
        
        /**
         * –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞
         */
        function generateReport() {
            console.log('üìà –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞');
            showNotification('info', '–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –Ω–∞—á–∞—Ç–∞...');
            
            setTimeout(() => {
                showNotification('success', '–û—Ç—á–µ—Ç —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω');
            }, 2000);
        }
        
        /**
         * –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–∞
         */
        function exportReport() {
            console.log('üìà –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–∞');
            showNotification('success', '–≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–∞ –Ω–∞—á–∞—Ç');
        }
        
        /**
         * –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –æ—Ç—á–µ—Ç–æ–≤
         */
        function scheduleReport() {
            console.log('üìà –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è');
            showNotification('info', '–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –æ—Ç—á–µ—Ç–æ–≤');
        }
        
        /**
         * –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
         */
        function toggleAutomation() {
            const enabled = document.getElementById('automation-enabled').checked;
            const toggleLabel = document.querySelector('.toggle-label');
            
            toggleLabel.textContent = enabled ? '–í–∫–ª—é—á–µ–Ω–æ' : '–í—ã–∫–ª—é—á–µ–Ω–æ';
            
            console.log('üìà –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:', enabled ? '–≤–∫–ª—é—á–µ–Ω–∞' : '–≤—ã–∫–ª—é—á–µ–Ω–∞');
            showNotification(
                enabled ? 'success' : 'warning', 
                enabled ? '–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –≤–∫–ª—é—á–µ–Ω–∞' : '–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –≤—ã–∫–ª—é—á–µ–Ω–∞'
            );
        }
        
        /**
         * –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
         */
        function showNotification(type, message) {
            const container = document.getElementById('notification-container');
            if (!container) {
                alert(message);
                return;
            }
            
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <div class="notification-content">
                    <span class="notification-icon">${type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : 'üìà'}</span>
                    <span class="notification-message">${message}</span>
                </div>
                <button class="notification-close" onclick="this.parentElement.remove()">√ó</button>
            `;
            
            container.appendChild(notification);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 5000);
        }
    </script>
</body>
</html>