/**
 * üîß –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï iOS NAVIGATION
 * 
 * –ü–†–û–ë–õ–ï–ú–ê: –ù–∞–≤–∏–≥–∞—Ü–∏—è "–≤—Å–ø–ª—ã–≤–∞–µ—Ç" –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ –Ω–∞ iPhone –≤ Telegram Mini App
 * –†–ï–®–ï–ù–ò–ï: –†–∞–¥–∏–∫–∞–ª—å–Ω—ã–µ —Ñ–∏–∫—Å—ã —Å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–µ–π
 * 
 * –≠—Ç–æ—Ç —Ñ–∞–π–ª –ü–û–õ–ù–û–°–¢–¨–Æ –ü–ï–†–ï–ó–ê–ü–ò–°–´–í–ê–ï–¢ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –¥–ª—è iOS
 */

/* ============================================================================
   üçé CRITICAL iOS NAVIGATION FIXES - –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–ê–Ø –°–¢–ê–ë–ò–õ–ò–ó–ê–¶–ò–Ø
   ============================================================================ */

/* –î–ï–¢–ï–ö–¢–û–† iOS - –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ JavaScript */
.ios-device {
    /* –û—Å–Ω–æ–≤–∞ –¥–ª—è iOS —Ñ–∏–∫—Å–æ–≤ */
    -webkit-text-size-adjust: 100%;
    -webkit-tap-highlight-color: rgba(0,0,0,0);
}

/* üîß –†–ê–î–ò–ö–ê–õ–¨–ù–´–ô –§–ò–ö–° #1: –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
.ios-device .bottom-nav {
    /* –ü–û–ó–ò–¶–ò–û–ù–ò–†–û–í–ê–ù–ò–ï: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Ñ–∏–∫—Å–∞—Ü–∏—è */
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    width: 100vw !important;
    
    /* TRANSFORM LOCK: –ü–æ–ª–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π */
    transform: translateZ(0) !important;
    -webkit-transform: translateZ(0) !important;
    will-change: auto !important; /* –ù–ï transform! –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ! */
    
    /* LAYER ISOLATION: –°–æ–∑–¥–∞–Ω–∏–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–ª–æ—è */
    -webkit-backface-visibility: hidden !important;
    backface-visibility: hidden !important;
    contain: layout style paint !important;
    isolation: isolate !important;
    
    /* Z-INDEX: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç */
    z-index: 999999 !important;
    
    /* TRANSITIONS: –ü–æ–ª–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ */
    transition: none !important;
    -webkit-transition: none !important;
    animation: none !important;
    -webkit-animation: none !important;
    
    /* –†–ê–ó–ú–ï–†–´: –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã */
    height: 64px !important;
    min-height: 64px !important;
    max-height: 64px !important;
    
    /* SAFE AREA: –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ Safe Area */
    padding-bottom: env(safe-area-inset-bottom, 0px) !important;
    box-sizing: border-box !important;
    
    /* SCROLL LOCK: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤–ª–∏—è–Ω–∏—è —Å–∫—Ä–æ–ª–ª–∞ */
    -webkit-overflow-scrolling: auto !important;
    overscroll-behavior: none !important;
    -webkit-overscroll-behavior: none !important;
}

/* üîß –†–ê–î–ò–ö–ê–õ–¨–ù–´–ô –§–ò–ö–° #2: –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
.ios-device .bottom-nav > * {
    /* –í—Å–µ –¥–æ—á–µ—Ä–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã - –±–µ–∑ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–π */
    transform: none !important;
    -webkit-transform: none !important;
    will-change: auto !important;
    position: relative !important;
}

/* üîß –†–ê–î–ò–ö–ê–õ–¨–ù–´–ô –§–ò–ö–° #3: –§–∏–∫—Å–∞—Ü–∏—è –∏–∫–æ–Ω–æ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
.ios-device .bottom-nav .nav-item {
    /* –ë–õ–û–ö–ò–†–û–í–ö–ê –î–í–ò–ñ–ï–ù–ò–Ø –ò–ö–û–ù–û–ö */
    position: relative !important;
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
    
    /* –†–ê–ó–ú–ï–†–´: –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã */
    width: calc(20% - 4px) !important;
    height: 56px !important;
    flex: none !important;
    
    /* TRANSFORM LOCK */
    transform: none !important;
    -webkit-transform: none !important;
    transition: none !important;
    
    /* CONTENT ALIGNMENT */
    gap: 4px !important;
    padding: 4px !important;
    box-sizing: border-box !important;
}

/* üîß –†–ê–î–ò–ö–ê–õ–¨–ù–´–ô –§–ò–ö–° #4: –ò–∫–æ–Ω–∫–∏ –∏ —Ç–µ–∫—Å—Ç */
.ios-device .bottom-nav .nav-icon {
    /* –†–ê–ó–ú–ï–†–´ –ò–ö–û–ù–û–ö */
    width: 24px !important;
    height: 24px !important;
    flex-shrink: 0 !important;
    
    /* –ë–õ–û–ö–ò–†–û–í–ö–ê –¢–†–ê–ù–°–§–û–†–ú–ê–¶–ò–ô */
    transform: none !important;
    -webkit-transform: none !important;
    transition: none !important;
    
    /* –í–´–†–ê–í–ù–ò–í–ê–ù–ò–ï */
    display: block !important;
    margin: 0 auto !important;
}

.ios-device .bottom-nav .nav-label {
    /* –†–ê–ó–ú–ï–†–´ –¢–ï–ö–°–¢–ê */
    font-size: 10px !important;
    line-height: 12px !important;
    height: 12px !important;
    
    /* –ë–õ–û–ö–ò–†–û–í–ö–ê –¢–†–ê–ù–°–§–û–†–ú–ê–¶–ò–ô */
    transform: none !important;
    -webkit-transform: none !important;
    transition: none !important;
    
    /* –í–´–†–ê–í–ù–ò–í–ê–ù–ò–ï */
    text-align: center !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    margin: 0 !important;
    padding: 0 !important;
}

/* ============================================================================
   üõ°Ô∏è –ó–ê–©–ò–¢–ê –û–¢ –í–ù–ï–®–ù–ò–• –°–¢–ò–õ–ï–ô - –ó–ê–©–ò–©–ê–ï–ú –û–¢ –ü–ï–†–ï–ó–ê–ü–ò–°–ò
   ============================================================================ */

/* –ó–∞—â–∏—Ç–∞ –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö CSS –∫–ª–∞—Å—Å–æ–≤ */
.ios-device .bottom-nav[class*="transform"],
.ios-device .bottom-nav[style*="transform"],
.ios-device .bottom-nav .nav-item[class*="transform"],
.ios-device .bottom-nav .nav-item[style*="transform"] {
    transform: none !important;
    -webkit-transform: none !important;
}

/* –ó–∞—â–∏—Ç–∞ –æ—Ç animation –∫–ª–∞—Å—Å–æ–≤ */
.ios-device .bottom-nav[class*="animate"],
.ios-device .bottom-nav[class*="transition"],
.ios-device .bottom-nav .nav-item[class*="animate"],
.ios-device .bottom-nav .nav-item[class*="transition"] {
    animation: none !important;
    transition: none !important;
    -webkit-animation: none !important;
    -webkit-transition: none !important;
}

/* ============================================================================
   üéØ –ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–´–ï INLINE –°–¢–ò–õ–ò - –ü–û–°–õ–ï–î–ù–ò–ô –£–†–û–í–ï–ù–¨ –ó–ê–©–ò–¢–´
   ============================================================================ */

/* –ï—Å–ª–∏ CSS –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç - JavaScript —É—Å—Ç–∞–Ω–æ–≤–∏—Ç —ç—Ç–∏ —Å—Ç–∏–ª–∏ –∫–∞–∫ inline */
/* –≠—Ç–∏ —Å—Ç–∏–ª–∏ –±—É–¥—É—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ */

/* ============================================================================
   üîß –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –§–ò–ö–°–´ –î–õ–Ø –°–¢–ê–ë–ò–õ–¨–ù–û–°–¢–ò
   ============================================================================ */

/* –§–∏–∫—Å –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ overlap */
.ios-device .page-content {
    /* –û—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
    padding-bottom: calc(64px + env(safe-area-inset-bottom, 0px) + 16px) !important;
    
    /* –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ */
    min-height: calc(100vh - 64px - env(safe-area-inset-bottom, 0px)) !important;
    min-height: calc(100dvh - 64px - env(safe-area-inset-bottom, 0px)) !important;
    
    /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ overflow */
    box-sizing: border-box !important;
}

/* –§–∏–∫—Å –¥–ª—è body - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ bounce */
.ios-device body {
    /* SCROLL LOCK */
    overscroll-behavior: none !important;
    -webkit-overscroll-behavior: none !important;
    -webkit-overflow-scrolling: touch !important;
    
    /* –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º–æ—Å—Ç–∏ */
    min-height: calc(100vh + 1px) !important;
}

/* –§–∏–∫—Å –¥–ª—è html - viewport —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è */
.ios-device html {
    /* –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º–æ—Å—Ç—å */
    height: calc(100% + 1px) !important;
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
}

/* ============================================================================
   üöÄ PERFORMANCE OPTIMIZATION
   ============================================================================ */

/* GPU —É—Å–∫–æ—Ä–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
.ios-device .bottom-nav {
    /* –¢–æ–ª—å–∫–æ translateZ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–ø–æ–∑–∏—Ç–Ω–æ–≥–æ —Å–ª–æ—è */
    -webkit-transform: translateZ(0) !important;
    transform: translateZ(0) !important;
    
    /* –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ */
    -webkit-perspective: 1000px !important;
    perspective: 1000px !important;
}

/* –û—Ç–∫–ª—é—á–µ–Ω–∏–µ GPU —É—Å–∫–æ—Ä–µ–Ω–∏—è –¥–ª—è –¥–æ—á–µ—Ä–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
.ios-device .bottom-nav * {
    -webkit-transform: none !important;
    transform: none !important;
    will-change: auto !important;
}

/* ============================================================================
   üîç DEBUG –†–ï–ñ–ò–ú - –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
   ============================================================================ */

/* –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ñ–∏–∫—Å–æ–≤ */
.ios-device.debug-navigation .bottom-nav {
    border-top: 2px solid #00ff00 !important;
}

.ios-device.debug-navigation .bottom-nav::before {
    content: "iOS FIX ACTIVE" !important;
    position: absolute !important;
    top: -20px !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    background: #00ff00 !important;
    color: #000 !important;
    padding: 2px 6px !important;
    font-size: 10px !important;
    border-radius: 4px !important;
    z-index: 999999 !important;
}

/* ============================================================================
   üì± –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –§–ò–ö–°–´ –î–õ–Ø –†–ê–ó–õ–ò–ß–ù–´–• iOS –í–ï–†–°–ò–ô
   ============================================================================ */

/* iOS 13+ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ñ–∏–∫—Å—ã */
@supports (overflow: clip) {
    .ios-device .bottom-nav {
        overflow: clip !important;
    }
}

/* iOS 14+ safe-area —Ñ–∏–∫—Å—ã */
@supports (padding: max(0px)) {
    .ios-device .bottom-nav {
        padding-bottom: max(8px, env(safe-area-inset-bottom)) !important;
    }
}

/* iOS 15+ viewport —Ñ–∏–∫—Å—ã */
@supports (height: 100dvh) {
    .ios-device .page-content {
        min-height: calc(100dvh - 64px - env(safe-area-inset-bottom, 0px)) !important;
    }
}
