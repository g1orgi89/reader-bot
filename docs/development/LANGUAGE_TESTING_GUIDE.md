# üçÑ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —è–∑—ã–∫–æ–≤

## üöÄ **–ë–´–°–¢–†–´–ô –°–¢–ê–†–¢**

–ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —è–∑—ã–∫–æ–≤, –ø—Ä–æ–≤–µ–¥–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —Ç–µ—Å—Ç—ã:

### 1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞**
```bash
npm start
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
```
üöÄ Starting Shrooms Support Bot Server...
üåç Language Service: Simple (3 languages supported)
üçÑ Language detection: SIMPLIFIED (no complex analysis)
‚úÖ Server running on port 3000
```

### 2. **–ë–∞–∑–æ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API**

#### –†—É—Å—Å–∫–∏–π —è–∑—ã–∫:
```bash
curl -X POST http://localhost:3000/api/chat \
  -H "Content-Type: application/json" \
  -d '{"message": "–ü—Ä–∏–≤–µ—Ç, —á—Ç–æ —Ç–∞–∫–æ–µ —Ç–æ–∫–µ–Ω SHROOMS?", "userId": "test-ru"}'
```

#### –ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫:
```bash
curl -X POST http://localhost:3000/api/chat \
  -H "Content-Type: application/json" \
  -d '{"message": "Hello, what is SHROOMS token?", "userId": "test-en"}'
```

#### –ò—Å–ø–∞–Ω—Å–∫–∏–π —è–∑—ã–∫:
```bash
curl -X POST http://localhost:3000/api/chat \
  -H "Content-Type: application/json" \
  -d '{"message": "Hola, qu√© es el token SHROOMS?", "userId": "test-es"}'
```

### 3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —è–∑—ã–∫–æ–≤**

```bash
# –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ conversationId –∏–∑ –ø–µ—Ä–≤–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
CONV_ID="–≤–∞—à_conversation_id"

# –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º
curl -X POST http://localhost:3000/api/chat \
  -H "Content-Type: application/json" \
  -d '{"message": "–†–∞—Å—Å–∫–∞–∂–∏ –ø–æ–¥—Ä–æ–±–Ω–µ–µ", "userId": "test-switch", "conversationId": "'$CONV_ID'"}'

# –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π
curl -X POST http://localhost:3000/api/chat \
  -H "Content-Type: application/json" \
  -d '{"message": "Now tell me in English", "userId": "test-switch", "conversationId": "'$CONV_ID'"}'
```

## üß™ **–ü–û–î–†–û–ë–ù–û–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï**

### **–¢–µ—Å—Ç 1: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ –ø–æ API**
```bash
curl -X POST http://localhost:3000/api/chat/detect-language \
  -H "Content-Type: application/json" \
  -d '{"text": "–ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª–µ–∫?"}'
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç**:
```json
{
  "success": true,
  "data": {
    "detectedLanguage": "ru",
    "method": "simple",
    "metadata": {
      "simplified": true
    }
  }
}
```

### **–¢–µ—Å—Ç 2: Socket.IO –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**

1. –û—Ç–∫—Ä–æ–π—Ç–µ: http://localhost:3000/test-chat.html
2. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ "Socket.IO" —Ä–µ–∂–∏–º
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è:
   - "–ü—Ä–∏–≤–µ—Ç!" (–¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ —Ä—É—Å—Å–∫–æ–º)
   - "Hello!" (–¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π)
   - "¬°Hola!" (–¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –∏—Å–ø–∞–Ω—Å–∫–∏–π)

### **–¢–µ—Å—Ç 3: Health Check**
```bash
curl http://localhost:3000/api/health | jq '.services.language'
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç**:
```json
{
  "status": "ok",
  "service": "SimpleLanguageService",
  "supportedLanguages": 3,
  "defaultLanguage": "en"
}
```

### **–¢–µ—Å—Ç 4: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —è–∑—ã–∫–æ–≤**
```bash
curl http://localhost:3000/api/chat/languages
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç**:
```json
{
  "success": true,
  "data": {
    "supportedLanguages": [
      {"code": "en", "name": "English", "nativeName": "English"},
      {"code": "es", "name": "Spanish", "nativeName": "Espa√±ol"}, 
      {"code": "ru", "name": "Russian", "nativeName": "–†—É—Å—Å–∫–∏–π"}
    ],
    "defaultLanguage": "en"
  }
}
```

## ‚ö° **–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò**

### **–°–∫–æ—Ä–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞**
```bash
# –ò–∑–º–µ—Ä—è–µ–º –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
time curl -X POST http://localhost:3000/api/chat \
  -H "Content-Type: application/json" \
  -d '{"message": "Test performance", "userId": "perf-test"}' \
  -s > /dev/null
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: < 2 —Å–µ–∫—É–Ω–¥—ã –æ–±—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

### **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã**
```bash
# –û—Ç–ø—Ä–∞–≤–ª—è–µ–º 5 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
for i in {1..5}; do
  curl -X POST http://localhost:3000/api/chat \
    -H "Content-Type: application/json" \
    -d '{"message": "Parallel test '$i'", "userId": "parallel-'$i'"}' &
done
wait
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è —É—Å–ø–µ—à–Ω–æ

## üîç **–ü–†–û–í–ï–†–ö–ê –ö–ê–ß–ï–°–¢–í–ê –û–ü–†–ï–î–ï–õ–ï–ù–ò–Ø –Ø–ó–´–ö–ê**

### **–¢–µ—Å—Ç–æ–≤—ã–µ —Ñ—Ä–∞–∑—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏**:

#### –î–æ–ª–∂–Ω—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å—Å—è –∫–∞–∫ —Ä—É—Å—Å–∫–∏–π (ru):
- "–ü—Ä–∏–≤–µ—Ç, –∫–∞–∫ –¥–µ–ª–∞?"
- "–ß—Ç–æ —Ç–∞–∫–æ–µ –∫–æ—à–µ–ª–µ–∫?"
- "–£ –º–µ–Ω—è –ø—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º"
- "–ü–æ–º–æ—â—å –Ω—É–∂–Ω–∞"
- "–°–ø–∞—Å–∏–±–æ –∑–∞ –æ—Ç–≤–µ—Ç"

#### –î–æ–ª–∂–Ω—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å—Å—è –∫–∞–∫ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π (en):
- "Hello, how are you?"
- "What is a wallet?"
- "I have a connection problem"
- "Need help"
- "Thank you for response"

#### –î–æ–ª–∂–Ω—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å—Å—è –∫–∞–∫ –∏—Å–ø–∞–Ω—Å–∫–∏–π (es):
- "Hola, ¬øc√≥mo est√°s?"
- "¬øQu√© es una billetera?"
- "Tengo un problema de conexi√≥n"
- "Necesito ayuda"
- "Gracias por la respuesta"

### **–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**:
```bash
#!/bin/bash
# test-language-detection.sh

declare -A tests=(
  ["–ü—Ä–∏–≤–µ—Ç, –∫–∞–∫ –¥–µ–ª–∞?"]="ru"
  ["Hello, how are you?"]="en"
  ["Hola, ¬øc√≥mo est√°s?"]="es"
  ["–ß—Ç–æ —Ç–∞–∫–æ–µ —Ç–æ–∫–µ–Ω?"]="ru"
  ["What is a token?"]="en"
  ["¬øQu√© es un token?"]="es"
)

for text in "${!tests[@]}"; do
  expected="${tests[$text]}"
  result=$(curl -s -X POST http://localhost:3000/api/chat/detect-language \
    -H "Content-Type: application/json" \
    -d "{\"text\": \"$text\"}" | jq -r '.data.detectedLanguage')
  
  if [ "$result" = "$expected" ]; then
    echo "‚úÖ PASS: \"$text\" ‚Üí $result"
  else
    echo "‚ùå FAIL: \"$text\" ‚Üí $result (expected: $expected)"
  fi
done
```

## üêõ **–†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú**

### **–ü—Ä–æ–±–ª–µ–º–∞**: –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ**: 
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `server/services/simpleLanguage.js`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –≤ `server/index.js` –∏ `server/api/chat.js`

### **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞
**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –≤ `simpleLanguage.js`
2. –î–æ–±–∞–≤—å—Ç–µ –±–æ–ª—å—à–µ –º–∞—Ä–∫–µ—Ä–æ–≤ –¥–ª—è –Ω—É–∂–Ω–æ–≥–æ —è–∑—ã–∫–∞
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Claude –ø–æ–ª—É—á–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç

### **–ü—Ä–æ–±–ª–µ–º–∞**: –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Ç–∞—Ä—ã–µ —Å–µ—Ä–≤–∏—Å—ã –¥–µ—Ç–µ–∫—Ü–∏–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å Claude API

## üéØ **–ö–†–ò–¢–ï–†–ò–ò –£–°–ü–ï–•–ê**

### ‚úÖ **–í—Å–µ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏ —É—Å–ø–µ—à–Ω–æ, –µ—Å–ª–∏**:
- –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- API `/chat` –æ—Ç–≤–µ—á–∞–µ—Ç –±—ã—Å—Ç—Ä–æ (< 2 —Å–µ–∫)
- –Ø–∑—ã–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ (>90% —Ç–æ—á–Ω–æ—Å—Ç—å)
- Socket.IO —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- Health check –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∫–∞–∫ "ok"
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–ª–∞–≤–Ω–æ

### üìä **–ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞**:
- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞**: < 2 —Å–µ–∫—É–Ω–¥
- **–¢–æ—á–Ω–æ—Å—Ç—å**: > 90% –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π
- **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: 0 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –≤—ã–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 10+ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

## üöÄ **–°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò**

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **–£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã**:
   ```bash
   rm server/services/languageDetect.js
   rm server/utils/languageDetect.js  
   rm server/api/language-debug.js
   ```

2. **–û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é**:
   - –£–¥–∞–ª–∏—Ç—å —Å–µ–∫—Ü–∏–∏ –æ —Å–ª–æ–∂–Ω–æ–π –¥–µ—Ç–µ–∫—Ü–∏–∏ –≤ README
   - –û–±–Ω–æ–≤–∏—Ç—å API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ production**:
   - –°–ª–µ–¥–∏—Ç—å –∑–∞ —Ç–æ—á–Ω–æ—Å—Ç—å—é –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —è–∑—ã–∫–æ–≤
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
   - –°–æ–±–∏—Ä–∞—Ç—å –æ—Ç–∑—ã–≤—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 28 –º–∞—è 2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é  
**–ê–≤—Ç–æ—Ä**: Shrooms Development Team üçÑ